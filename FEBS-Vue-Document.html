<!-- build time:Wed Sep 11 2019 16:17:13 GMT+0800 (GMT+08:00) --><!doctype html><html class="theme-next mist" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta name="google-site-verification" content="7Tau9WyVgxnsEY9oYedu9g0U6_8akOX3wiKbaYcrg9A"><meta name="baidu-site-verification" content="EVwLiaxdxX"><link href="/css/animsition.min.css" rel="stylesheet" type="text/css"><link href="/css/xps13.css" rel="stylesheet" type="text/css"><link href="/css/message.css" rel="stylesheet" type="text/css"><script type="text/javascript" src="/js/jquery-1.11.3.min.js"></script><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css"><meta name="keywords" content="FEBS,"><link rel="alternate" href="/atom.xml" title="MrBird" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1"><meta name="description" content="FEBS-Vueä¸ºFEBS-Shiroçš„å‰åç«¯åˆ†ç¦»ç‰ˆæœ¬ï¼Œå‰ç«¯ä½¿ç”¨Vueå…¨å®¶æ¡¶ï¼Œç»„ä»¶åº“é‡‡ç”¨Ant-Design-Vueã€‚æ–‡æ¡£é‡Œä»‹ç»çš„ç¤ºä¾‹æ˜¯åœ¨Windows10æ“ä½œç³»ç»Ÿä¸‹å®Œæˆçš„ï¼Œåç«¯ç¼–è¾‘å™¨ä½¿ç”¨IDEAï¼Œå‰ç«¯ç¼–è¾‘å™¨ä½¿ç”¨WebStormã€‚"><meta name="keywords" content="FEBS"><meta property="og:type" content="article"><meta property="og:title" content="FEBS-Vueæ–‡æ¡£"><meta property="og:url" content="http://mrbird.cc/FEBS-Vue-Document.html"><meta property="og:site_name" content="MrBird"><meta property="og:description" content="FEBS-Vueä¸ºFEBS-Shiroçš„å‰åç«¯åˆ†ç¦»ç‰ˆæœ¬ï¼Œå‰ç«¯ä½¿ç”¨Vueå…¨å®¶æ¡¶ï¼Œç»„ä»¶åº“é‡‡ç”¨Ant-Design-Vueã€‚æ–‡æ¡£é‡Œä»‹ç»çš„ç¤ºä¾‹æ˜¯åœ¨Windows10æ“ä½œç³»ç»Ÿä¸‹å®Œæˆçš„ï¼Œåç«¯ç¼–è¾‘å™¨ä½¿ç”¨IDEAï¼Œå‰ç«¯ç¼–è¾‘å™¨ä½¿ç”¨WebStormã€‚"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="http://mrbird.cc/img/febsvue/20190409165245.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409170853.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409171301.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409171954.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409172902.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409173934.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409184301.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409185417.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409184818.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409185112.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409185643.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409190322.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409191649.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409191833.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409204143.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409204745.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409204849.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409205834.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409210335.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409210901.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409211225.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409211912.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409212130.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409212334.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409213345.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409223016.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-10_094404.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409220000.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/20190409225225.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/20190409223442.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-10_094842.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/asdfasdfasd.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-10_100815.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-10_101222.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-10_095141.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-10_095533.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-10_101510.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-10_101826.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-10_104514.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/backend-xmind.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-08_113758.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/20190408141755.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-08_145115.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190408145646.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190408153154.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/redis-zset.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190408154805.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/2019-04-08_185510.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409101831.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409133947.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/20190409134916.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/20190409135425.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/20190409135740.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409141220.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/asdfasdfasfdasdf.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409142251.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409142642.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409143223.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409143905.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409143943.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409144206.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409144908.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/20190409150427.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409152413.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409152550.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409153002.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409153227.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409153710.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409153800.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409161742.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409161947.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409162214.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQæˆªå›¾20190409162930.png"><meta property="og:image" content="http://mrbird.cc/img/febsvue/QQå›¾ç‰‡20190409164403.jpg"><meta property="og:updated_time" content="2019-07-12T13:02:30.446Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="FEBS-Vueæ–‡æ¡£"><meta name="twitter:description" content="FEBS-Vueä¸ºFEBS-Shiroçš„å‰åç«¯åˆ†ç¦»ç‰ˆæœ¬ï¼Œå‰ç«¯ä½¿ç”¨Vueå…¨å®¶æ¡¶ï¼Œç»„ä»¶åº“é‡‡ç”¨Ant-Design-Vueã€‚æ–‡æ¡£é‡Œä»‹ç»çš„ç¤ºä¾‹æ˜¯åœ¨Windows10æ“ä½œç³»ç»Ÿä¸‹å®Œæˆçš„ï¼Œåç«¯ç¼–è¾‘å™¨ä½¿ç”¨IDEAï¼Œå‰ç«¯ç¼–è¾‘å™¨ä½¿ç”¨WebStormã€‚"><meta name="twitter:image" content="http://mrbird.cc/img/febsvue/20190409165245.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",sidebar:{position:"left",display:"always",offset:12,offset_float:0,b2t:!1,scrollpercent:!1},fancybox:!1,motion:!1}</script><title>FEBS-Vueæ–‡æ¡£ | MrBird</title></head><body ondragstart="return!1" class="animsition" lang="zh-Hans" style="overflow-x:hidden;padding-right:280px"><script type="text/javascript" src="/js/animsition.min.js"></script><script type="text/javascript" src="/js/mo.min.js"></script><script>$("body").animsition({inClass:"fade-in",outClass:"fade-out",inDuration:300,outDuration:300,linkElement:".animsition-link",loading:!0,loadingParentElement:"html",loadingClass:"line-scale-pulse-out",loadingInner:"",timeout:!1,timeoutCountdown:50,onLoadEvent:!0,browser:["animation-duration","-webkit-animation-duration"],overlay:!1,overlayClass:"animsition-overlay-slide",overlayParentElement:"html",transition:function(n){window.location.href=n}})</script><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><link href="https://fonts.font.im/css?family=Merienda" rel="stylesheet"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title" style="font-family:Merienda;font-size:1.3rem">MrBird</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section">HOME</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section">ARCHIVES</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section">TAGS</a></li><li class="menu-item menu-item-friends"><a href="/friends/" rel="section">FRIENDS</a></li><div class="sidebar-toggle" style="display:none"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="Search" spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div><div class="header-inner"><div class="note info" style="margin:0;letter-spacing:.15px">ğŸ¤æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»º<strong>å¾®æœåŠ¡æƒé™ç³»ç»Ÿ</strong>ï¼ˆä»é›¶åˆ°éƒ¨ç½²ï¼‰ï¼š<a style="color:#40dab2;font-weight:600" href="https://www.kancloud.cn/mrbird/spring-cloud" target="_blank">https://www.kancloud.cn/mrbird/spring-cloud</a></div></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://mrbird.cc/FEBS-Vue-Document.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="MrBird"><meta itemprop="description" content=""><meta itemprop="image" content="/images/blogImage.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MrBird"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">FEBS-Vueæ–‡æ¡£</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-01-01T09:24:51+08:00">2019-01-01 </time></span><span></span> <span class="post-meta-divider">|</span> <span class="page-pv"><i class="fa fa-laptop"></i>&nbsp;&nbsp;Visit count <span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>FEBS-Vueä¸º<a href="https://github.com/wuyouzhuguli/FEBS-Shiro" target="_blank" rel="noopener">FEBS-Shiro</a>çš„å‰åç«¯åˆ†ç¦»ç‰ˆæœ¬ï¼Œå‰ç«¯ä½¿ç”¨Vueå…¨å®¶æ¡¶ï¼Œç»„ä»¶åº“é‡‡ç”¨<a href="https://vuecomponent.github.io/ant-design-vue/docs/vue/introduce-cn/" target="_blank" rel="noopener">Ant-Design-Vue</a>ã€‚</p><p>æ–‡æ¡£é‡Œä»‹ç»çš„ç¤ºä¾‹æ˜¯åœ¨Windows10æ“ä½œç³»ç»Ÿä¸‹å®Œæˆçš„ï¼Œåç«¯ç¼–è¾‘å™¨ä½¿ç”¨IDEAï¼Œå‰ç«¯ç¼–è¾‘å™¨ä½¿ç”¨WebStormã€‚<a id="more"></a></p><h2 id="é¡¹ç›®å¯¼å…¥"><a href="#é¡¹ç›®å¯¼å…¥" class="headerlink" title="é¡¹ç›®å¯¼å…¥"></a>é¡¹ç›®å¯¼å…¥</h2><p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ç›´æ¥åœ¨æ¡Œé¢ä¸Šé€šè¿‡git bashå…‹éš†é¡¹ç›®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/wuyouzhuguli/FEBS-Vue.git</span><br></pre></td></tr></table></figure><p></p><p>å…‹éš†åï¼Œæ¡Œé¢ä¸Šå¤šå‡ºä¸€ä¸ªFEBS-Vueæ–‡ä»¶å¤¹ï¼š</p><p><img src="img/febsvue/20190409165245.png" alt="QQæˆªå›¾20190409165245.png"></p><p>backendä¸ºåç«¯é¡¹ç›®æºç ï¼Œfrontendä¸ºå‰ç«¯é¡¹ç›®æºç ï¼Œsqlä¸ºæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ã€‚</p><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><p>å› ä¸ºé¡¹ç›®ç”¨åˆ°äº†JDK 8çš„ä¸€äº›ç‰¹æ€§ï¼Œæ‰€ä»¥JDKæœ€ä½ç‰ˆæœ¬ä¸èƒ½ä½äº8ã€‚</p><p>JDK 8å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://www.oracle.com/technetwork/java/javase/downloadsã€‚" target="_blank" rel="noopener">https://www.oracle.com/technetwork/java/javase/downloadsã€‚</a></p><h3 id="å®‰è£…Node-js"><a href="#å®‰è£…Node-js" class="headerlink" title="å®‰è£…Node.js"></a>å®‰è£…Node.js</h3><p>Node.jsä¸‹è½½åœ°å€ï¼š<a href="http://nodejs.cn/download/" target="_blank" rel="noopener">http://nodejs.cn/download/</a>ï¼Œç›´æ¥å®‰è£…å³å¯ï¼Œå®‰è£…åæŸ¥çœ‹å…¶ç‰ˆæœ¬ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409170853.png" alt="QQæˆªå›¾20190409170853.png"></p><p>Node.jsé›†æˆäº†npmï¼Œæ‰€ä»¥å®‰è£…å¥½Node.jsånpmå°±å¯ä»¥ä½¿ç”¨äº†ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409171301.png" alt="QQæˆªå›¾20190409171301.png"></p><h3 id="å®‰è£…yarn"><a href="#å®‰è£…yarn" class="headerlink" title="å®‰è£…yarn"></a>å®‰è£…yarn</h3><p>åœ¨CMDä¸­æ‰§è¡Œ<code>npm install -g yarn</code>ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409171954.png" alt="QQæˆªå›¾20190409171954.png"></p><p>å› ä¸ºæˆ‘ä¹‹å‰å·²ç»å®‰è£…è¿‡äº†ï¼Œæ‰€ä»¥è¿™é‡Œå°±ç›¸å½“äºæ›´æ–°æ“ä½œäº†ã€‚</p><h3 id="å®‰è£…Redis"><a href="#å®‰è£…Redis" class="headerlink" title="å®‰è£…Redis"></a>å®‰è£…Redis</h3><p>é¡¹ç›®ç¼“å­˜æ•°æ®åº“ä½¿ç”¨çš„æ˜¯Redisï¼Œæ‰€ä»¥åœ¨å¯¼å…¥é¡¹ç›®å‰éœ€å…ˆå®‰è£…Redisã€‚</p><p>Redis Windowsç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/MicrosoftArchive/redis/releases" target="_blank" rel="noopener">https://github.com/MicrosoftArchive/redis/releases</a>ã€‚ç›´æ¥ä¸‹è½½zipç‰ˆæœ¬è§£å‹åˆ°ä»»æ„ç›®å½•å³å¯ã€‚</p><p>ä¸‹è½½åï¼Œä½¿ç”¨cmdå‘½ä»¤åˆ‡æ¢åˆ°Redisæ ¹ç›®å½•ï¼Œç„¶åè¿è¡Œ<code>redis-server.exe redis.windows.conf</code>å¯åŠ¨å³å¯ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409172902.png" alt="QQæˆªå›¾20190409172902.png"></p><h3 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h3><p>é¡¹ç›®æ•°æ®åº“é‡‡ç”¨MySQLç¤¾åŒºç‰ˆï¼Œç‰ˆæœ¬ä¸º5.7.xã€‚</p><p>ä¸‹è½½åœ°å€ï¼š<a href="https://dev.mysql.com/downloads/windows/installer/5.7.html" target="_blank" rel="noopener">https://dev.mysql.com/downloads/windows/installer/5.7.html</a></p><h3 id="å¯¼å…¥SQL"><a href="#å¯¼å…¥SQL" class="headerlink" title="å¯¼å…¥SQL"></a>å¯¼å…¥SQL</h3><p>ä½¿ç”¨Navicatæ–°å»ºä¸€ä¸ªæ•°æ®åº“ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409173934.png" alt="QQæˆªå›¾20190409173934.png"></p><p>ç„¶åå¯¼å…¥SQLè„šæœ¬å³å¯ã€‚</p><h3 id="å¯¼å…¥åç«¯é¡¹ç›®"><a href="#å¯¼å…¥åç«¯é¡¹ç›®" class="headerlink" title="å¯¼å…¥åç«¯é¡¹ç›®"></a>å¯¼å…¥åç«¯é¡¹ç›®</h3><p>IDEAé€‰æ‹©backendï¼š <img src="img/febsvue/QQæˆªå›¾20190409184301.png" alt="QQæˆªå›¾20190409184301.png"></p><p>å¯¼å…¥é¡¹ç›®åå®‰è£…lombokæ’ä»¶ï¼ˆä¸æ‡‚lombokå¯ä»¥è‡ªè¡Œç™¾åº¦ï¼‰ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409185417.png" alt="QQæˆªå›¾20190409185417.png"></p><p>å®‰è£…å®Œé‡å¯IDEAæ‰èƒ½ç”Ÿæ•ˆã€‚</p><p>æ¥ç€ä¿®æ”¹application.ymlä¸­çš„æ•°æ®åº“å’ŒRedisé…ç½®ï¼Œä¿®æ”¹å®Œåé€šè¿‡Spring Bootå…¥å£ç±»FebsApplicationå¯åŠ¨å³å¯ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409184818.png" alt="QQæˆªå›¾20190409184818.png"></p><p><img src="img/febsvue/QQæˆªå›¾20190409185112.png" alt="QQæˆªå›¾20190409185112.png"></p><p>æ¥ç€å¼€å§‹å¯¼å…¥å‰ç«¯é¡¹ç›®ã€‚</p><h3 id="å¯¼å…¥å‰ç«¯é¡¹ç›®"><a href="#å¯¼å…¥å‰ç«¯é¡¹ç›®" class="headerlink" title="å¯¼å…¥å‰ç«¯é¡¹ç›®"></a>å¯¼å…¥å‰ç«¯é¡¹ç›®</h3><p>ä½¿ç”¨WebStormæ‰“å¼€frontendï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409185643.png" alt="QQæˆªå›¾20190409185643.png"></p><p>åœ¨ç»ˆç«¯è¾“å…¥<code>yarn install</code>å‘½ä»¤å®‰è£…ä¾èµ–ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409190322.png" alt="QQæˆªå›¾20190409190322.png"></p><p>ç¨ç­‰ç‰‡åˆ»ï¼Œåä¸æ”¾å®½ã€‚</p><p>ä¾èµ–ä¸‹è½½å®Œæ¯•åï¼Œè¾“å…¥yarn startå¯åŠ¨å‰ç«¯é¡¹ç›®ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409191649.png" alt="QQæˆªå›¾20190409191649.png"></p><p>æµè§ˆå™¨è®¿é—®<a href="http://localhost:8081" target="_blank" rel="noopener">http://localhost:8081</a>ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409191833.png" alt="QQæˆªå›¾20190409191833.png"></p><h2 id="é¡¹ç›®éƒ¨ç½²"><a href="#é¡¹ç›®éƒ¨ç½²" class="headerlink" title="é¡¹ç›®éƒ¨ç½²"></a>é¡¹ç›®éƒ¨ç½²</h2><p>ä¸‹é¢æ¼”ç¤ºå¦‚ä½•åœ¨Linuxä¸Šéƒ¨ç½²é¡¹ç›®ï¼ˆä¾‹å­é‡‡ç”¨CentOS7ï¼‰ã€‚</p><h3 id="Vagrantåˆ›å»ºCentOS"><a href="#Vagrantåˆ›å»ºCentOS" class="headerlink" title="Vagrantåˆ›å»ºCentOS"></a>Vagrantåˆ›å»ºCentOS</h3><p>å¦‚æœæ²¡æœ‰CentOS7ç¯å¢ƒå¯ä»¥ä½¿ç”¨Vagrantå¿«é€Ÿæ„å»ºä¸€ä¸ªCentOSè™šæ‹Ÿæœºï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="https://mrbird.cc/Create-Virtual-Machine-By-Vagrant.html">https://mrbird.cc/Create-Virtual-Machine-By-Vagrant.html</a>ã€‚æˆ‘çš„CentOSè™šæ‹ŸæœºIPä¸ºï¼š192.168.33.11ã€‚</p><div class="note danger"><p>ä½¿ç”¨å‘½ä»¤<code>timedatectl set-timezone Asia/Shanghai</code>è®¾ç½®CentOSçš„æ—¶åŒºï¼Œä»¥é¿å…å› æ—¶åŒºå¸¦æ¥çš„BUGã€‚</p></div><h3 id="Javaç¯å¢ƒé…ç½®"><a href="#Javaç¯å¢ƒé…ç½®" class="headerlink" title="Javaç¯å¢ƒé…ç½®"></a>Javaç¯å¢ƒé…ç½®</h3><ol><li>ä¸‹è½½JDK8ï¼š</li></ol><p><img src="img/febsvue/QQæˆªå›¾20190409204143.png" alt="QQæˆªå›¾20190409204143.png"></p><p>ä¸‹è½½åé€šè¿‡Vagrantå…±äº«åˆ°CentOSä¸Šï¼ˆæˆ‘çš„Vagrantfileå…±äº«é…ç½®ä¸º<code>config.vm.synced_folder &quot;./sync&quot;, &quot;/vagrant&quot;, create:true, owner: &quot;root&quot;, group: &quot;root&quot;</code>ï¼‰ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409204745.png" alt="QQæˆªå›¾20190409204745.png"></p><ol start="2"><li>å®‰è£…JDK8ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh jdk-8u201-linux-x64.rpm</span><br></pre></td></tr></table></figure><p><img src="img/febsvue/QQæˆªå›¾20190409204849.png" alt="QQæˆªå›¾20190409204849.png"></p><ol start="3"><li>é…ç½®ç¯å¢ƒå˜é‡</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p>è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/usr/java/jdk1.8.0_201</span><br><span class="line">JRE_HOME=/usr/java/jdk1.8.0_201/jre</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$JRE_HOME</span>/bin</span><br><span class="line">CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar:<span class="variable">$JRE_HOME</span>/lib</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME JRE_HOME PATH CLASSPATH</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæ•ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><p></p><h3 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a>å®‰è£…Docker</h3><p>å®˜æ–¹å®‰è£…æ•™ç¨‹ï¼š<a href="https://docs.docker.com/install/linux/docker-ce/centos/" target="_blank" rel="noopener">https://docs.docker.com/install/linux/docker-ce/centos/</a></p><p>å®‰è£…å¥½åï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409205834.png" alt="QQæˆªå›¾20190409205834.png"></p><h3 id="Dockerå®‰è£…MySQL"><a href="#Dockerå®‰è£…MySQL" class="headerlink" title="Dockerå®‰è£…MySQL"></a>Dockerå®‰è£…MySQL</h3><ol><li>æ‹‰å–MySQLé•œåƒï¼š</li></ol><p><img src="img/febsvue/QQæˆªå›¾20190409210335.png" alt="QQæˆªå›¾20190409210335.png"></p><ol start="2"><li>åˆ›å»ºç›®å½•/home/febs/mysqlï¼Œç”¨äºæŒ‚è½½MySQL volume:</li></ol><p><img src="img/febsvue/QQæˆªå›¾20190409210901.png" alt="QQæˆªå›¾20190409210901.png"></p><ol start="3"><li>åˆ›å»ºMySQLå®¹å™¨ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name mysql -p 3306:3306 \</span><br><span class="line"> -v $(<span class="built_in">pwd</span>):/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7.25</span><br></pre></td></tr></table></figure><p><img src="img/febsvue/QQæˆªå›¾20190409211225.png" alt="QQæˆªå›¾20190409211225.png"></p><ol start="4"><li>ä½¿ç”¨Navicatè¿æ¥MySQLï¼Œåˆ›å»ºæ•°æ®åº“å¹¶å¯¼å…¥æ•°æ®ï¼š</li></ol><p>è¿æ¥ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409211912.png" alt="QQæˆªå›¾20190409211912.png"></p><p>æ–°å¢æ•°æ®åº“ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409212130.png" alt="QQæˆªå›¾20190409212130.png"></p><p>å¯¼å…¥SQLï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409212334.png" alt="QQæˆªå›¾20190409212334.png"></p><h3 id="Dockerå®‰è£…Redis"><a href="#Dockerå®‰è£…Redis" class="headerlink" title="Dockerå®‰è£…Redis"></a>Dockerå®‰è£…Redis</h3><ol><li>æ‹‰å–Redisé•œåƒ:</li></ol><p><img src="img/febsvue/QQæˆªå›¾20190409213345.png" alt="QQæˆªå›¾20190409213345.png"></p><ol start="2"><li>åˆ›å»ºæ–‡ä»¶/home/febs/redis/conf/redis.confï¼Œç”¨äºæŒ‚è½½Redisé…ç½®æ–‡ä»¶ï¼š</li></ol><p><img src="img/febsvue/QQæˆªå›¾20190409223016.png" alt="QQæˆªå›¾20190409213604.png"></p><ol start="3"><li>åˆ›å»ºRediså®¹å™¨ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 6379:6379 \</span><br><span class="line"> -v /home/febs/redis/conf/redis.conf:/usr/<span class="built_in">local</span>/etc/redis/redis.conf \</span><br><span class="line"> --name redis redis:4.0.14</span><br></pre></td></tr></table></figure><p>æµ‹è¯•è¿æ¥ï¼š</p><p><img src="img/febsvue/2019-04-10_094404.png" alt="QQæˆªå›¾20190410094147.png"></p><h3 id="Dockerå®‰è£…Nginx"><a href="#Dockerå®‰è£…Nginx" class="headerlink" title="Dockerå®‰è£…Nginx"></a>Dockerå®‰è£…Nginx</h3><ol><li>æ‹‰å–Nginxé•œåƒ:</li></ol><p><img src="img/febsvue/QQæˆªå›¾20190409220000.png" alt="QQæˆªå›¾20190409220000.png"></p><ol start="2"><li>åˆ›å»ºç›®å½•/home/febs/nginx/htmlã€/home/febs/nginx/logså’Œæ–‡ä»¶/home/febs/nginx/conf/nginx.confï¼Œåˆ†åˆ«ç”¨äºæŒ‚è½½Nginx html,logså’Œé…ç½®æ–‡ä»¶ï¼š</li></ol><p><img src="img/febsvue/20190409225225.png" alt="QQæˆªå›¾20190409225225.png"> <img src="img/febsvue/20190409223442.png" alt="QQæˆªå›¾20190409220212.png"></p><ol start="3"><li>ä¿®æ”¹Nginxé…ç½®ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /home/febs/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">worker_processes</span>  auto;</span><br><span class="line"></span><br><span class="line"><span class="attribute">error_log</span>   /var/log/nginx/error.log;</span><br><span class="line"><span class="attribute">pid</span>   /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">        <span class="attribute">include</span> mime.types;</span><br><span class="line">        <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">server_names_hash_bucket_size</span> <span class="number">512</span>;</span><br><span class="line">        <span class="attribute">client_header_buffer_size</span> <span class="number">32k</span>;</span><br><span class="line">        <span class="attribute">large_client_header_buffers</span> <span class="number">4</span> <span class="number">32k</span>;</span><br><span class="line">        <span class="attribute">client_max_body_size</span> <span class="number">50m</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">sendfile</span>   <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">tcp_nopush</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">keepalive_timeout</span> <span class="number">60</span>;</span><br><span class="line">        <span class="attribute">tcp_nodelay</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">fastcgi_connect_timeout</span> <span class="number">300</span>;</span><br><span class="line">        <span class="attribute">fastcgi_send_timeout</span> <span class="number">300</span>;</span><br><span class="line">        <span class="attribute">fastcgi_read_timeout</span> <span class="number">300</span>;</span><br><span class="line">        <span class="attribute">fastcgi_buffer_size</span> <span class="number">64k</span>;</span><br><span class="line">        <span class="attribute">fastcgi_buffers</span> <span class="number">4</span> <span class="number">64k</span>;</span><br><span class="line">        <span class="attribute">fastcgi_busy_buffers_size</span> <span class="number">128k</span>;</span><br><span class="line">        <span class="attribute">fastcgi_temp_file_write_size</span> <span class="number">256k</span>;</span><br><span class="line">        <span class="attribute">fastcgi_intercept_errors</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">gzip</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">gzip_min_length</span>  <span class="number">1k</span>;</span><br><span class="line">        <span class="attribute">gzip_buffers</span>     <span class="number">16</span> <span class="number">8k</span>;</span><br><span class="line">        <span class="attribute">gzip_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">gzip_comp_level</span> <span class="number">6</span>;</span><br><span class="line">        <span class="attribute">gzip_types</span>     text/plain application/javascript application/x-javascript text/javascript text/css application/xml;</span><br><span class="line">        <span class="attribute">gzip_vary</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">gzip_proxied</span>   expired <span class="literal">no</span>-cache <span class="literal">no</span>-store private auth;</span><br><span class="line">        <span class="attribute">gzip_disable</span>   <span class="string">"MSIE [1-6]\."</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">limit_conn_zone</span> <span class="variable">$binary_remote_addr</span> zone=perip:<span class="number">10m</span>;</span><br><span class="line">        <span class="attribute">limit_conn_zone</span> <span class="variable">$server_name</span> zone=perserver:<span class="number">10m</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">server_tokens</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  localhost;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">charset</span> utf-<span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">root</span>   html;</span><br><span class="line">            <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">            <span class="attribute">root</span>   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>åˆ›å»ºNginxå®¹å™¨ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run --name nginx -d -p 80:80  \</span><br><span class="line">-v /home/febs/nginx/conf/nginx.conf:/etc/ng inx/nginx.conf  \</span><br><span class="line">-v /home/febs/nginx/html:/etc/nginx/html \</span><br><span class="line">-v /home/febs/nginx/logs:/var/<span class="built_in">log</span>/nginx nginx:1.14.2</span><br></pre></td></tr></table></figure><h3 id="åç«¯éƒ¨ç½²"><a href="#åç«¯éƒ¨ç½²" class="headerlink" title="åç«¯éƒ¨ç½²"></a>åç«¯éƒ¨ç½²</h3><p>ä¿®æ”¹application.ymlä¸­æ•°æ®åº“å’Œredisçš„è¿æ¥é…ç½®ï¼Œç„¶åå°†é¡¹ç›®æ‰“åŒ…æˆjaræ–‡ä»¶ï¼š</p><p><img src="img/febsvue/2019-04-10_094842.png" alt="2019-04-10_094842.png"></p><p>å°†å…¶ä¸Šä¼ åˆ°CentOSè™šæ‹Ÿæœºçš„/home/febs/backendç›®å½•ä¸‹ï¼š</p><p><img src="img/febsvue/asdfasdfasd.png" alt="2019-04-10_100008.png"></p><p>ç¼–å†™ä¸€ä¸ªå¯åŠ¨é¡¹ç›®çš„shellè„šæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim start.sh</span><br></pre></td></tr></table></figure><p></p><p>å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar febs_shiro_jwt-1.0.0-release.jar &amp;</span><br></pre></td></tr></table></figure><p></p><p>ç¼–å†™ä¸€ä¸ªå…³åœé¡¹ç›®çš„shellè„šæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim stop.sh</span><br></pre></td></tr></table></figure><p></p><p>å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PID=`ps -ef | grep febs_shiro_jwt-1.0.0-release.jar | grep -v grep | awk &apos;&#123;print $2&#125;&apos;`</span><br><span class="line">if [ -z &quot;$PID&quot; ]</span><br><span class="line">then</span><br><span class="line">    echo Application is already stopped</span><br><span class="line">else</span><br><span class="line">    echo kill $PID</span><br><span class="line">    kill -9 $PID</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p></p><p>æˆæƒï¼Œè®©å…¶å¯æ‰§è¡Œï¼š</p><p><img src="img/febsvue/2019-04-10_100815.png" alt="2019-04-10_100815.png"></p><p>å¯åŠ¨é¡¹ç›®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./start.sh</span><br><span class="line"></span><br><span class="line">tail -f nohup.out</span><br></pre></td></tr></table></figure><p></p><p>çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºçš„æ—¶å€™è¯´æ˜åç«¯é¡¹ç›®å¯åŠ¨æˆåŠŸï¼š</p><p><img src="img/febsvue/2019-04-10_101222.png" alt="2019-04-10_101222.png"></p><h3 id="å‰ç«¯éƒ¨ç½²"><a href="#å‰ç«¯éƒ¨ç½²" class="headerlink" title="å‰ç«¯éƒ¨ç½²"></a>å‰ç«¯éƒ¨ç½²</h3><p>ç‚¹å‡»buildï¼š</p><p><img src="img/febsvue/2019-04-10_095141.png" alt="2019-04-10_095141.png"></p><p>buildæˆåŠŸåï¼Œé¡¹ç›®ç›®å½•ä¸‹ä¼šå¤šå‡ºä¸ªdistæ–‡ä»¶å¤¹ï¼š</p><p><img src="img/febsvue/2019-04-10_095533.png" alt="2019-04-10_095533.png"></p><p>å°†è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ä¸Šä¼ åˆ°CentOSè™šæ‹Ÿæœºçš„/home/febs/nginx/htmlç›®å½•ä¸‹ï¼š</p><p><img src="img/febsvue/2019-04-10_101510.png" alt="2019-04-10_101510.png"></p><p>æµè§ˆå™¨è®¿é—®<a href="http://192.168.33.11/#/login" target="_blank" rel="noopener">http://192.168.33.11/#/login</a>ï¼š</p><p><img src="img/febsvue/2019-04-10_101826.png" alt="2019-04-10_101826.png"></p><p><img src="img/febsvue/2019-04-10_104514.png" alt="2019-04-10_104514.png"></p><p>éƒ¨ç½²æˆåŠŸã€‚</p><h2 id="åç«¯é¡¹ç›®ä»‹ç»"><a href="#åç«¯é¡¹ç›®ä»‹ç»" class="headerlink" title="åç«¯é¡¹ç›®ä»‹ç»"></a>åç«¯é¡¹ç›®ä»‹ç»</h2><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><p>åç«¯é¡¹ç›®ç›®å½•å«ä¹‰å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="img/febsvue/backend-xmind.png" alt="backend-xmind.png"></p><p>Commonæ¨¡å—æ–‡ä»¶å«ä¹‰å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="img/febsvue/2019-04-08_113758.png" alt="2019-04-08_113758.png"></p><p>å…¶ä»–æ¨¡å—æ–‡ä»¶è¾ƒä¸ºç®€å•ï¼Œç•¥ã€‚</p><h3 id="é¡¹ç›®é…ç½®"><a href="#é¡¹ç›®é…ç½®" class="headerlink" title="é¡¹ç›®é…ç½®"></a>é¡¹ç›®é…ç½®</h3><p>application.ymlä¸­é™¤äº†å„ä¸ªæ’ä»¶çš„é…ç½®å¤–ï¼Œä¸‹é¢è¿™æ®µé…ç½®ä¸ºç³»ç»Ÿé…ç½®ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">febs:</span></span><br><span class="line"><span class="attr">  openAopLog:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  max:</span></span><br><span class="line"><span class="attr">    batch:</span></span><br><span class="line"><span class="attr">      insert:</span></span><br><span class="line"><span class="attr">        num:</span> <span class="number">1000</span></span><br><span class="line"><span class="attr">  shiro:</span></span><br><span class="line"><span class="attr">    anonUrl:</span> <span class="string">/login,/logout/**,/regist,/user/check/**</span></span><br><span class="line"><span class="attr">    jwtTimeOut:</span> <span class="number">3600</span></span><br></pre></td></tr></table></figure><p></p><ul><li><p><code>febs.opAopLog</code>ï¼šBooleanç±»å‹ï¼Œå–å€¼trueæˆ–è€…falseï¼Œä¸ºtrueæ—¶è¡¨ç¤ºå¼€å¯Aopè®°å½•ç”¨æˆ·çš„æ“ä½œæ—¥å¿—ï¼Œéœ€å’Œ<code>@Log</code>æ³¨è§£æ­é…ä½¿ç”¨ã€‚</p></li><li><p><code>febs.max.batch.insert.num</code>ï¼šå¤§äº0çš„Integerç±»å‹ï¼Œè¡¨ç¤ºExcelå¯¼å…¥æ•°æ®å½“æ¬¡æœ€å¤§å…¥åº“æ•°æ®é‡ã€‚æ¯”å¦‚é…ç½®ä¸º1000æ—¶è¡¨ç¤ºå…¥åº“æ•°æ®ä¸º0 - 1000 æ—¶åªä¼šæ‰§è¡Œä¸€æ¬¡æ•°æ®åº“commitæ“ä½œã€‚</p></li><li><p><code>febs.shiro.anonUrl</code>ï¼šé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ— éœ€è®¤è¯çš„èµ„æºè·¯å¾„ã€‚</p></li><li><p><code>febs.shiro.jwtTimeOut</code>ï¼šå®šä¹‰tokençš„æœ‰æ•ˆæ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œæ¯”å¦‚é…ç½®ä¸º3600è¡¨ç¤ºtokenä¸€ä¸ªå°æ—¶å†…æœ‰æ•ˆï¼Œè¶…è¿‡ä¸€ä¸ªå°æ—¶åéœ€è¦é‡æ–°è®¤è¯ã€‚</p></li></ul><h3 id="RESTfulé£æ ¼"><a href="#RESTfulé£æ ¼" class="headerlink" title="RESTfulé£æ ¼"></a>RESTfulé£æ ¼</h3><p>ç³»ç»ŸControlleræš´éœ²çš„æ¥å£é£æ ¼ä¸ºRESTfulï¼Œé€šè¿‡HTTPè¯·æ±‚methodå¯¹åº”å¢åˆ æ”¹æŸ¥ç±»å‹ï¼Œå“åº”ä»¥HTTP Codeä¸ºåˆ¤æ–­ä¾æ®ã€‚</p><p>ä»¥UserControllerä¸ºä¾‹å­ï¼š</p><table><tr><th>æè¿°</th><th>è¯·æ±‚URI</th><th>HTTP Method</th><th>å¯¹åº”æ³¨è§£</th></tr><tr><td>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</td><td>/user</td><td>GET</td><td>@GetMapping</td></tr><tr><td>é€šè¿‡ç”¨æˆ·åæŸ¥æ‰¾ç”¨æˆ·</td><td>/user/{username}</td><td>GET</td><td>@GetMapping</td></tr><tr><td>æ–°å¢ç”¨æˆ·</td><td>/user</td><td>POST</td><td>@PostMapping</td></tr><tr><td>ä¿®æ”¹ç”¨æˆ·</td><td>/user</td><td>PUT</td><td>@PutMapping</td></tr><tr><td>åˆ é™¤ç”¨æˆ·</td><td>/user/{userIds}</td><td>DELETE</td><td>@DeleteMapping</td></tr></table><p>Controlleræ–¹æ³•é»˜è®¤è¿”å›200çŠ¶æ€ç ï¼Œå½“ControlleræŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå°†è¢«<code>GlobalExceptionHandler</code>æ•è·ï¼Œæ ¹æ®å¼‚å¸¸ç±»å‹ï¼Œè¿”å›ä¸åŒçš„HTTPçŠ¶æ€ç ï¼š</p><table><tr><th>å¼‚å¸¸ç±»å‹</th><th>å¼‚å¸¸æè¿°</th><th>çŠ¶æ€ç </th><th>å¯¹åº”å¸¸é‡</th></tr><tr><td>UnauthorizedException</td><td>æœªæˆæƒå¼‚å¸¸ï¼Œæƒé™ä¸è¶³å¼‚å¸¸</td><td>403</td><td>HttpStatus.FORBIDDEN</td></tr><tr><td>LimitAccessException</td><td>é™åˆ¶è®¿é—®å¼‚å¸¸ï¼Œè®¿é—®æ¥å£é¢‘ç‡è¶…é™</td><td>429</td><td>HttpStatus.TOO_MANY_REQUESTS</td></tr><tr><td>ConstraintViolationException</td><td>å‚æ•°æ ¡éªŒå¼‚å¸¸ï¼ˆæ™®é€šä¼ å‚ï¼‰</td><td>400</td><td>HttpStatus.BAD_REQUEST</td></tr><tr><td>BindException</td><td>å‚æ•°æ ¡éªŒå¼‚å¸¸ï¼ˆå®ä½“å¯¹è±¡ä¼ å‚ï¼‰</td><td>400</td><td>HttpStatus.BAD_REQUEST</td></tr><tr><td>FebsException</td><td>Febsç³»ç»Ÿå¼‚å¸¸</td><td>500</td><td>HttpStatus.INTERNAL_SERVER_ERROR</td></tr><tr><td>Exception</td><td>å‰©ä¸‹çš„åˆ«çš„å¼‚å¸¸</td><td>500</td><td>HttpStatus.INTERNAL_SERVER_ERROR</td></tr></table><h3 id="æ•°æ®å±‚ä»‹ç»"><a href="#æ•°æ®å±‚ä»‹ç»" class="headerlink" title="æ•°æ®å±‚ä»‹ç»"></a>æ•°æ®å±‚ä»‹ç»</h3><p>é¦–å…ˆçœ‹çœ‹è¡¨ç»“æ„ï¼Œæ•°æ®è¡¨åˆ†ä¸ºä¸¤å¤§ç±»ï¼šå®šæ—¶ä»»åŠ¡è¡¨å’Œç³»ç»Ÿè¡¨ã€‚</p><p><img src="img/febsvue/20190408141755.png" alt="QQæˆªå›¾20190408141755.png"></p><p>ä»¥qrtz_å¼€å¤´çš„ä¸ºå®šæ—¶ä»»åŠ¡è¡¨ï¼Œå®šæ—¶ä»»åŠ¡æœ‰åŸºäºå†…å­˜å’ŒåŸºäºæ•°æ®åº“çš„ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨çš„æ˜¯åŸºäºæ•°æ®åº“æŒä¹…åŒ–çš„æ–¹æ¡ˆã€‚è¦è¯¦ç»†äº†è§£è¿™äº›è¡¨å¯ä»¥å‚è€ƒæ–‡ç« ï¼š<a href="http://www.ibloger.net/article/2650.html" target="_blank" rel="noopener">http://www.ibloger.net/article/2650.html</a>ã€‚</p><p>ä»¥t_å¼€å¤´çš„ä¸ºç³»ç»Ÿè¡¨ï¼Œä»–ä»¬çš„å…³ç³»å¦‚ä¸‹æ‰€ç¤º:</p><p><img src="img/febsvue/2019-04-08_145115.png" alt="2019-04-08_145115.png"></p><p>å…¶ä¸­ç”¨æˆ·ï¼Œè§’è‰²å’Œæƒé™ä¹‹é—´çš„å…³ç³»ä½¿ç”¨çš„æ˜¯ç»å…¸çš„RBACï¼ˆRole-Based Access Controlï¼ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰æ¨¡å‹ã€‚ç®€å•åœ°è¯´ï¼Œä¸€ä¸ªç”¨æˆ·æ‹¥æœ‰è‹¥å¹²è§’è‰²ï¼Œæ¯ä¸€ä¸ªè§’è‰²æ‹¥æœ‰è‹¥å¹²æƒé™ã€‚è¿™æ ·ï¼Œå°±æ„é€ æˆâ€œç”¨æˆ·-è§’è‰²-æƒé™â€çš„æˆæƒæ¨¡å‹ã€‚åœ¨è¿™ç§æ¨¡å‹ä¸­ï¼Œç”¨æˆ·ä¸è§’è‰²ä¹‹é—´ï¼Œè§’è‰²ä¸æƒé™ä¹‹é—´ï¼Œä¸€èˆ¬è€…æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190408145646.png" alt="QQæˆªå›¾20190408145646.png"></p><p>æ¯”å¦‚è·å–ç”¨æˆ·åä¸ºmrbridçš„ç”¨æˆ·æƒé™è¿‡ç¨‹ä¸ºï¼š</p><ol><li><p>é€šè¿‡mrbridçš„user_idä»t_user_roleè¡¨è·å–å¯¹åº”çš„role_idï¼›</p></li><li><p>é€šè¿‡ç¬¬1æ­¥è·å–çš„role_idä»t_role_menuè¡¨è·å–å¯¹åº”çš„menu_idï¼›</p></li><li><p>é€šè¿‡ç¬¬2æ­¥è·å–çš„menu_idä»t_menuè·å–menuç›¸å…³ä¿¡æ¯ï¼ˆt_menuè¡¨çš„permissionä¸ºæƒé™ä¿¡æ¯ï¼‰ã€‚</p></li></ol><p>æ•°æ®å±‚æ¡†æ¶é‡‡ç”¨çš„æ˜¯<a href="https://mp.baomidou.com/guide/" target="_blank" rel="noopener">MybatisPlus</a>ï¼Œå…·ä½“å¯ä»¥å‚è€ƒå…¶å®˜æ–¹æ–‡æ¡£ã€‚</p><h3 id="ç™»å½•é€»è¾‘"><a href="#ç™»å½•é€»è¾‘" class="headerlink" title="ç™»å½•é€»è¾‘"></a>ç™»å½•é€»è¾‘</h3><p>ç™»å½•é€»è¾‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190408153154.png" alt="QQæˆªå›¾20190408153154.png"></p><p>è¿™é‡Œè¯¦ç»†è¯´æ˜ä¸‹ç™»å½•æˆåŠŸåçš„ç¬¬2æ­¥ã€ç¬¬3æ­¥å’Œç¬¬4æ­¥è¿‡ç¨‹ï¼š</p><ul><li><p>ç™»å½•æˆåŠŸåï¼Œæ„å»ºä¸€ä¸ªActiveUserå¯¹è±¡ï¼Œå¯¹åº”<code>LoginController</code>çš„<code>saveTokenToRedis</code>æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„å»ºåœ¨çº¿ç”¨æˆ·</span></span><br><span class="line">ActiveUser activeUser = <span class="keyword">new</span> ActiveUser();</span><br><span class="line">activeUser.setUsername(user.getUsername());</span><br><span class="line">activeUser.setIp(ip);</span><br><span class="line">activeUser.setToken(token.getToken());</span><br><span class="line">activeUser.setLoginAddress(AddressUtil.getCityInfo(DbSearcher.BTREE_ALGORITHM, ip));</span><br><span class="line"></span><br><span class="line"><span class="comment">// zset å­˜å‚¨ç™»å½•ç”¨æˆ·ï¼Œscore ä¸ºè¿‡æœŸæ—¶é—´æˆ³</span></span><br><span class="line"><span class="keyword">this</span>.redisService.zadd(FebsConstant.ACTIVE_USERS_ZSET_PREFIX, Double.valueOf(token.getExipreAt()), mapper.writeValueAsString(activeUser));</span><br></pre></td></tr></table></figure><p>ç„¶åå°†<code>activeUser</code>é€šè¿‡<code>ObjectMapper</code>åºåˆ—åŒ–ï¼Œå­˜å‚¨åˆ°Redisçš„Zsetç»“æ„ä¸­ï¼Œkeyä¸º<code>FebsConstant.ACTIVE_USERS_ZSET_PREFIX</code>ï¼ˆå³febs.user.activeï¼‰ï¼Œscoreä¸ºè¯¥ç”¨æˆ·çš„ç™»å½•è¿‡æœŸæ—¶é—´ç‚¹ï¼ˆå³Tokeanå¤±æ•ˆæ—¶é—´ï¼‰ï¼Œvalueä¸º<code>activeUser</code>åºåˆ—åŒ–å€¼ã€‚</p><div class="note info"><p>Zsetå®ƒåœ¨setçš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªé¡ºåºå±æ€§(score)ï¼Œè¿™ä¸€å±æ€§åœ¨æ·»åŠ ä¿®æ”¹å…ƒç´ æ—¶å€™å¯ä»¥æŒ‡å®šï¼Œæ¯æ¬¡æŒ‡å®šåï¼Œzsetä¼šè‡ªåŠ¨é‡æ–°æŒ‰æ–°çš„å€¼è°ƒæ•´é¡ºåºã€‚å¯ä»¥ç†è§£ä¸ºæœ‰ä¸¤åˆ—å­—æ®µçš„æ•°æ®è¡¨ï¼Œä¸€åˆ—å­˜value,ä¸€åˆ—å­˜é¡ºåºç¼–å·ã€‚</p></div><p>Zsetç›¸å…³Rediså‘½ä»¤ï¼š</p><p><img src="img/febsvue/redis-zset.png" alt="redis-zset.png"></p><p>æ¯”å¦‚å½“ç”¨æˆ·mrbirdå’Œscottç™»å½•æˆåŠŸåï¼ŒæŸ¥çœ‹Redisä¸­keyä¸ºfebs.user.activeçš„å€¼:</p><p><img src="img/febsvue/QQæˆªå›¾20190408154805.png" alt="QQæˆªå›¾20190408154805.png"></p></li><li><p>å°†Tokenå­˜å‚¨åˆ°Redisä¸­ï¼škeyä¸ºfebs.cache.token.tokenå€¼.IPåœ°å€ï¼Œvalueä¸ºtokenå€¼ï¼Œæœ‰æ•ˆæœŸä¸ºtokençš„æœ‰æ•ˆæ—¶é•¿ï¼Œå¯¹åº”çš„æºç ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.redisService.set(FebsConstant.TOKEN_CACHE_PREFIX + token.getToken() + StringPool.DOT + ip, token.getToken(), properties.getShiro().getJwtTimeOut() * <span class="number">1000</span>);</span><br></pre></td></tr></table></figure></li><li><p>è¿”å›å‰ç«¯æ•°æ®åŒ…æ‹¬:</p><p>1.tokenï¼štokenï¼›</p><p>2.exipreTimeï¼štokenè¿‡æœŸæ—¶é—´ï¼›</p><p>3.rolesï¼šç”¨æˆ·è§’è‰²ï¼›</p><p>4.permissionsï¼šç”¨æˆ·æƒé™ï¼›</p><p>5.configï¼šç”¨æˆ·å‰ç«¯ç³»ç»Ÿçš„ä¸ªæ€§åŒ–é…ç½®ï¼›</p><p>6.userï¼šç”¨æˆ·ä¿¡æ¯ï¼ˆä¸åŒ…æ‹¬å¯†ç ï¼‰ã€‚</p><p>æ¯”å¦‚ï¼Œå½“scottç™»å½•æˆåŠŸåï¼Œæ¥å£è¿”å›æ•°æ®å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"permissions"</span>: [</span><br><span class="line">            <span class="string">"user:view"</span>,</span><br><span class="line">            <span class="string">"dept:add"</span>,</span><br><span class="line">            <span class="string">"job:export"</span>,</span><br><span class="line">            <span class="string">"role:add"</span>,</span><br><span class="line">            <span class="string">"weather:view"</span>,</span><br><span class="line">            <span class="string">"dict:add"</span>,</span><br><span class="line">            <span class="string">"role:export"</span>,</span><br><span class="line">            <span class="string">"menu:export"</span>,</span><br><span class="line">            <span class="string">"dict:view"</span>,</span><br><span class="line">            <span class="string">"dept:export"</span>,</span><br><span class="line">            <span class="string">"menu:view"</span>,</span><br><span class="line">            <span class="string">"role:view"</span>,</span><br><span class="line">            <span class="string">"user:export"</span>,</span><br><span class="line">            <span class="string">"job:add"</span>,</span><br><span class="line">            <span class="string">"dept:view"</span>,</span><br><span class="line">            <span class="string">"article:view"</span>,</span><br><span class="line">            <span class="string">"log:view"</span>,</span><br><span class="line">            <span class="string">"jobLog:view"</span>,</span><br><span class="line">            <span class="string">"job:view"</span>,</span><br><span class="line">            <span class="string">"menu:add"</span>,</span><br><span class="line">            <span class="string">"redis:view"</span>,</span><br><span class="line">            <span class="string">"log:export"</span>,</span><br><span class="line">            <span class="string">"movie:coming"</span>,</span><br><span class="line">            <span class="string">"movie:hot"</span>,</span><br><span class="line">            <span class="string">"dict:export"</span>,</span><br><span class="line">            <span class="string">"jobLog:export"</span>,</span><br><span class="line">            <span class="string">"user:online"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"roles"</span>: [</span><br><span class="line">            <span class="string">"æ³¨å†Œç”¨æˆ·"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"exipreTime"</span>: <span class="string">"20190408164521"</span>,</span><br><span class="line">        <span class="attr">"config"</span>: &#123;</span><br><span class="line">            <span class="attr">"userId"</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">"theme"</span>: <span class="string">"light"</span>,</span><br><span class="line">            <span class="attr">"layout"</span>: <span class="string">"side"</span>,</span><br><span class="line">            <span class="attr">"multiPage"</span>: <span class="string">"0"</span>,</span><br><span class="line">            <span class="attr">"fixSiderbar"</span>: <span class="string">"1"</span>,</span><br><span class="line">            <span class="attr">"fixHeader"</span>: <span class="string">"1"</span>,</span><br><span class="line">            <span class="attr">"color"</span>: <span class="string">"rgb(24, 144, 255)"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"user"</span>: &#123;</span><br><span class="line">            <span class="attr">"userId"</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">"username"</span>: <span class="string">"scott"</span>,</span><br><span class="line">            <span class="attr">"password"</span>: <span class="string">"it's a secret"</span>,</span><br><span class="line">            <span class="attr">"deptId"</span>: <span class="number">6</span>,</span><br><span class="line">            <span class="attr">"deptName"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"email"</span>: <span class="string">"scott@qq.com"</span>,</span><br><span class="line">            <span class="attr">"mobile"</span>: <span class="string">"15134627380"</span>,</span><br><span class="line">            <span class="attr">"status"</span>: <span class="string">"1"</span>,</span><br><span class="line">            <span class="attr">"createTime"</span>: <span class="string">"2017-12-30 00:16:39"</span>,</span><br><span class="line">            <span class="attr">"modifyTime"</span>: <span class="string">"2019-01-18 08:59:09"</span>,</span><br><span class="line">            <span class="attr">"lastLoginTime"</span>: <span class="string">"2019-01-23 15:34:28"</span>,</span><br><span class="line">            <span class="attr">"ssex"</span>: <span class="string">"0"</span>,</span><br><span class="line">            <span class="attr">"description"</span>: <span class="string">"æˆ‘æ˜¯scottï¼Œå—¯å—¯"</span>,</span><br><span class="line">            <span class="attr">"avatar"</span>: <span class="string">"gaOngJwsRYRaVAuXXcmB.png"</span>,</span><br><span class="line">            <span class="attr">"roleId"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"roleName"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"sortField"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"sortOrder"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"createTimeFrom"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"createTimeTo"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"YBeNsMJ0ZJm9GLJP1rlO"</span>,</span><br><span class="line">            <span class="attr">"authCacheKey"</span>: <span class="number">2</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"token"</span>: <span class="string">"b25e39b47e774b4a05b3cb1555fc377f209457c3fd339d373d3fca7b1ea8be56fdc6ed05b7ffb0700e7300d242fb83b57b35f45ee1b155b380 50a0671bc7ec54c2f2c5bb1aee0651db69ce657e8ab4cb79c7806209103eda8a3bc96aa043a0144ae3c06a5c549ac168183c37384cf4347e450bf11644d0 62c31ffc3059e63722f849a5de4540b0d1"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"message"</span>: <span class="string">"è®¤è¯æˆåŠŸ"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Redisç¼“å­˜ä½¿ç”¨"><a href="#Redisç¼“å­˜ä½¿ç”¨" class="headerlink" title="Redisç¼“å­˜ä½¿ç”¨"></a>Redisç¼“å­˜ä½¿ç”¨</h3><p>åœ¨ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œä¼šæ‰§è¡Œç¼“å­˜åˆå§‹åŒ–æ“ä½œï¼Œå¯¹åº”<code>CacheInitRunner</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CacheInitRunner</span> <span class="keyword">implements</span> <span class="title">ApplicationRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserManager userManager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(ApplicationArguments args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ...</span><br><span class="line">            List&lt;User&gt; list = <span class="keyword">this</span>.userService.list();</span><br><span class="line">            <span class="keyword">for</span> (User user : list) &#123;</span><br><span class="line">                userManager.loadUserRedisCache(user);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>loadUserRedisCache</code>æ–¹æ³•æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°†ç”¨æˆ·ç›¸å…³ä¿¡æ¯æ·»åŠ åˆ° Redisç¼“å­˜ä¸­</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user user</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadUserRedisCache</span><span class="params">(User user)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// ç¼“å­˜ç”¨æˆ·</span></span><br><span class="line">    cacheService.saveUser(user.getUsername());</span><br><span class="line">    <span class="comment">// ç¼“å­˜ç”¨æˆ·è§’è‰²</span></span><br><span class="line">    cacheService.saveRoles(user.getUsername());</span><br><span class="line">    <span class="comment">// ç¼“å­˜ç”¨æˆ·æƒé™</span></span><br><span class="line">    cacheService.savePermissions(user.getUsername());</span><br><span class="line">    <span class="comment">// ç¼“å­˜ç”¨æˆ·ä¸ªæ€§åŒ–é…ç½®</span></span><br><span class="line">    cacheService.saveUserConfigs(String.valueOf(user.getUserId()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸€è¿‡ç¨‹ç¼“å­˜äº†ç”¨æˆ·ä¿¡æ¯ï¼Œç”¨æˆ·è§’è‰²ä¿¡æ¯ï¼Œç”¨æˆ·æƒé™ä¿¡æ¯ï¼Œç”¨æˆ·çš„ä¸ªæ€§åŒ–é…ç½®ä¿¡æ¯ï¼Œç¼“å­˜çš„å…·ä½“keyï¼Œvalueå¯ä»¥æŸ¥çœ‹ä¸Šè¿°æ–¹æ³•çš„æºç ã€‚é€šè¿‡è¿™äº›ç¼“å­˜ï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦å‡è½»æ•°æ®åº“å‹åŠ›ã€‚</p><p>ä¸ºäº†ç¡®ä¿ç¼“å­˜æ•°æ®å’Œæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ç›¸åº”çš„å¢åˆ æ”¹æ–¹æ³•ä¸­å¯¹ç¼“å­˜è¿›è¡Œç›¸åº”çš„æ“ä½œã€‚æ¯”å¦‚åœ¨æ›´æ–°ç”¨æˆ·åï¼Œæˆ‘ä»¬å¿…é¡»æ›´æ–°ç›¸åº”çš„ç¼“å­˜ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUser</span><span class="params">(User user)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡æ–°å°†ç”¨æˆ·ä¿¡æ¯ï¼Œç”¨æˆ·è§’è‰²ä¿¡æ¯ï¼Œç”¨æˆ·æƒé™ä¿¡æ¯ åŠ è½½åˆ° redisä¸­</span></span><br><span class="line">    cacheService.saveUser(user.getUsername());</span><br><span class="line">    cacheService.saveRoles(user.getUsername());</span><br><span class="line">    cacheService.savePermissions(user.getUsername());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><div class="note danger"><p>æ€»è€Œè¨€ä¹‹ï¼Œç”±äºæˆ‘ä»¬åœ¨å¯åŠ¨ç³»ç»Ÿçš„æ—¶å€™ç¼“å­˜äº†ç”¨æˆ·ä¿¡æ¯ï¼Œç”¨æˆ·è§’è‰²ä¿¡æ¯ï¼Œç”¨æˆ·æƒé™ä¿¡æ¯ï¼Œç”¨æˆ·çš„ä¸ªæ€§åŒ–é…ç½®ä¿¡æ¯ï¼Œä¹‹åå‡¡æ˜¯æ¶‰åŠåˆ°ç”¨æˆ·ï¼Œç”¨æˆ·è§’è‰²ï¼Œç”¨æˆ·æƒé™å’Œç”¨æˆ·ä¸ªæ€§åŒ–é…ç½®çš„ç›¸å…³å¢åˆ æ”¹æ“ä½œéƒ½åº”è¯¥åŠæ—¶æ›´æ–°ç›¸åº”çš„ç¼“å­˜ã€‚</p></div><h3 id="åŠ¨æ€è·¯ç”±æ„å»º"><a href="#åŠ¨æ€è·¯ç”±æ„å»º" class="headerlink" title="åŠ¨æ€è·¯ç”±æ„å»º"></a>åŠ¨æ€è·¯ç”±æ„å»º</h3><p>ä¸åŒçš„ç”¨æˆ·æ‹¥æœ‰ä¸åŒçš„è§’è‰²ï¼Œä¸åŒçš„è§’è‰²å¯¹åº”ä¸åŒçš„èœå•æƒé™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ç”¨æˆ·æŸ¥è¯¢å‡ºå¯¹åº”çš„èœå•åˆ—è¡¨ï¼Œç„¶åå°†åˆ—è¡¨æ„å»ºæˆå‰ç«¯éœ€è¦çš„è·¯ç”±ï¼ˆå‰ç«¯æ ¹æ®è·¯ç”±ä¿¡æ¯æ„å»ºç›¸åº”çš„èœå•ï¼‰ã€‚</p><p>è·å–ç”¨æˆ·è·¯ç”±çš„æ–¹æ³•ä¸º<code>UserManage#getUserRouters</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡ç”¨æˆ·åæ„å»º Vueè·¯ç”±</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> username ç”¨æˆ·å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è·¯ç”±é›†åˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> ArrayList&lt;VueRouter&lt;Menu&gt;&gt; getUserRouters(String username) &#123;</span><br><span class="line">    List&lt;VueRouter&lt;Menu&gt;&gt; routes = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    List&lt;Menu&gt; menus = <span class="keyword">this</span>.menuService.findUserMenus(username);</span><br><span class="line">    menus.forEach(menu -&gt; &#123;</span><br><span class="line">        VueRouter&lt;Menu&gt; route = <span class="keyword">new</span> VueRouter&lt;&gt;();</span><br><span class="line">        route.setId(menu.getMenuId().toString());</span><br><span class="line">        route.setParentId(menu.getParentId().toString());</span><br><span class="line">        route.setIcon(menu.getIcon());</span><br><span class="line">        route.setPath(menu.getPath());</span><br><span class="line">        route.setComponent(menu.getComponent());</span><br><span class="line">        route.setName(menu.getMenuName());</span><br><span class="line">        route.setMeta(<span class="keyword">new</span> RouterMeta(<span class="keyword">true</span>, <span class="keyword">null</span>));</span><br><span class="line">        routes.add(route);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> TreeUtil.buildVueRouter(routes);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æ¯”å¦‚ç”¨æˆ·mrbirdå¯¹åº”çš„å‰ç«¯è·¯ç”±ä¸ºï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"path"</span>: <span class="string">"/"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"ä¸»é¡µ"</span>,</span><br><span class="line">        <span class="attr">"component"</span>: <span class="string">"MenuView"</span>,</span><br><span class="line">        <span class="attr">"icon"</span>: <span class="string">"none"</span>,</span><br><span class="line">        <span class="attr">"redirect"</span>: <span class="string">"/home"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"path"</span>: <span class="string">"/home"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ç³»ç»Ÿä¸»é¡µ"</span>,</span><br><span class="line">                <span class="attr">"component"</span>: <span class="string">"HomePageView"</span>,</span><br><span class="line">                <span class="attr">"icon"</span>: <span class="string">"home"</span>,</span><br><span class="line">                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                    <span class="attr">"closeable"</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">"isShow"</span>: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"path"</span>: <span class="string">"/system"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ç³»ç»Ÿç®¡ç†"</span>,</span><br><span class="line">                <span class="attr">"component"</span>: <span class="string">"PageView"</span>,</span><br><span class="line">                <span class="attr">"icon"</span>: <span class="string">"appstore-o"</span>,</span><br><span class="line">                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                    <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/system/user"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"ç”¨æˆ·ç®¡ç†"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"system/user/User"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/system/role"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"è§’è‰²ç®¡ç†"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"system/role/Role"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/system/menu"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"èœå•ç®¡ç†"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"system/menu/Menu"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/system/dept"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"éƒ¨é—¨ç®¡ç†"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"system/dept/Dept"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/system/dict"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"å­—å…¸ç®¡ç†"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"system/dict/Dict"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"path"</span>: <span class="string">"/monitor"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ç³»ç»Ÿç›‘æ§"</span>,</span><br><span class="line">                <span class="attr">"component"</span>: <span class="string">"PageView"</span>,</span><br><span class="line">                <span class="attr">"icon"</span>: <span class="string">"dashboard"</span>,</span><br><span class="line">                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                    <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/monitor/online"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"åœ¨çº¿ç”¨æˆ·"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"monitor/Online"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/monitor/systemlog"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"ç³»ç»Ÿæ—¥å¿—"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"monitor/SystemLog"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/monitor/redis/info"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"Redisç›‘æ§"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"monitor/RedisInfo"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/monitor/httptrace"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"è¯·æ±‚è¿½è¸ª"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"monitor/Httptrace"</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/monitor/system"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"ç³»ç»Ÿä¿¡æ¯"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"EmptyPageView"</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="attr">"children"</span>: [</span><br><span class="line">                            &#123;</span><br><span class="line">                                <span class="attr">"path"</span>: <span class="string">"/monitor/system/jvminfo"</span>,</span><br><span class="line">                                <span class="attr">"name"</span>: <span class="string">"JVMä¿¡æ¯"</span>,</span><br><span class="line">                                <span class="attr">"component"</span>: <span class="string">"monitor/JvmInfo"</span>,</span><br><span class="line">                                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                                    <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;,</span><br><span class="line">                            &#123;</span><br><span class="line">                                <span class="attr">"path"</span>: <span class="string">"/monitor/system/tomcatinfo"</span>,</span><br><span class="line">                                <span class="attr">"name"</span>: <span class="string">"Tomcatä¿¡æ¯"</span>,</span><br><span class="line">                                <span class="attr">"component"</span>: <span class="string">"monitor/TomcatInfo"</span>,</span><br><span class="line">                                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                                    <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;,</span><br><span class="line">                            &#123;</span><br><span class="line">                                <span class="attr">"path"</span>: <span class="string">"/monitor/system/info"</span>,</span><br><span class="line">                                <span class="attr">"name"</span>: <span class="string">"æœåŠ¡å™¨ä¿¡æ¯"</span>,</span><br><span class="line">                                <span class="attr">"component"</span>: <span class="string">"monitor/SystemInfo"</span>,</span><br><span class="line">                                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                                    <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"path"</span>: <span class="string">"/job"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ä»»åŠ¡è°ƒåº¦"</span>,</span><br><span class="line">                <span class="attr">"component"</span>: <span class="string">"PageView"</span>,</span><br><span class="line">                <span class="attr">"icon"</span>: <span class="string">"clock-circle-o"</span>,</span><br><span class="line">                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                    <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/job/job"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"å®šæ—¶ä»»åŠ¡"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"quartz/job/Job"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/job/log"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"è°ƒåº¦æ—¥å¿—"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"quartz/log/JobLog"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"path"</span>: <span class="string">"/web"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ç½‘ç»œèµ„æº"</span>,</span><br><span class="line">                <span class="attr">"component"</span>: <span class="string">"PageView"</span>,</span><br><span class="line">                <span class="attr">"icon"</span>: <span class="string">"compass"</span>,</span><br><span class="line">                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                    <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/web/weather"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"å¤©æ°”æŸ¥è¯¢"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"web/Weather"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/web/dailyArticle"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"æ¯æ—¥ä¸€æ–‡"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"web/DailyArticle"</span>,</span><br><span class="line">                        <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/web/movie"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"å½±è§†èµ„è®¯"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"EmptyPageView"</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="attr">"children"</span>: [</span><br><span class="line">                            &#123;</span><br><span class="line">                                <span class="attr">"path"</span>: <span class="string">"/web/movie/hot"</span>,</span><br><span class="line">                                <span class="attr">"name"</span>: <span class="string">"æ­£åœ¨çƒ­æ˜ "</span>,</span><br><span class="line">                                <span class="attr">"component"</span>: <span class="string">"web/MovieHot"</span>,</span><br><span class="line">                                <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                                    <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;,</span><br><span class="line">                            &#123;</span><br><span class="line">                                <span class="attr">"path"</span>: <span class="string">"/web/movie/coming"</span>,</span><br><span class="line">                                <span class="attr">"name"</span>: <span class="string">"å³å°†ä¸Šæ˜ "</span>,</span><br><span class="line">                                <span class="attr">"component"</span>: <span class="string">"web/MovieComing"</span>,</span><br><span class="line">                                <span class="attr">"icon"</span>: <span class="string">""</span>,</span><br><span class="line">                                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                                    <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"path"</span>: <span class="string">"/others"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"å…¶ä»–æ¨¡å—"</span>,</span><br><span class="line">                <span class="attr">"component"</span>: <span class="string">"PageView"</span>,</span><br><span class="line">                <span class="attr">"icon"</span>: <span class="string">"coffee"</span>,</span><br><span class="line">                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                    <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"path"</span>: <span class="string">"/others/excel"</span>,</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"å¯¼å…¥å¯¼å‡º"</span>,</span><br><span class="line">                        <span class="attr">"component"</span>: <span class="string">"others/Excel"</span>,</span><br><span class="line">                        <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                            <span class="attr">"closeable"</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"path"</span>: <span class="string">"/profile"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ä¸ªäººä¸­å¿ƒ"</span>,</span><br><span class="line">                <span class="attr">"component"</span>: <span class="string">"personal/Profile"</span>,</span><br><span class="line">                <span class="attr">"icon"</span>: <span class="string">"none"</span>,</span><br><span class="line">                <span class="attr">"meta"</span>: &#123;</span><br><span class="line">                    <span class="attr">"closeable"</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">"isShow"</span>: <span class="literal">false</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"path"</span>: <span class="string">"*"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"404"</span>,</span><br><span class="line">        <span class="attr">"component"</span>: <span class="string">"error/404"</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p></p><p>å…³äºVue Routerå¯ä»¥å‚è€ƒï¼š<a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener">https://router.vuejs.org/zh/</a>ã€‚</p><h3 id="æƒé™æ§åˆ¶"><a href="#æƒé™æ§åˆ¶" class="headerlink" title="æƒé™æ§åˆ¶"></a>æƒé™æ§åˆ¶</h3><p>æˆ‘ä»¬å¯ä»¥åœ¨Controllerçš„æ–¹æ³•ä¸Šé€šè¿‡Shiroç›¸å…³çš„æƒé™æ³¨è§£è¿›è¡Œæƒé™æ§åˆ¶ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ–¹æ³•åªæœ‰å½“ç”¨æˆ·æ‹¥æœ‰<code>user:add</code>æƒé™æ‰èƒ½è®¿é—®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="meta">@RequiresPermissions</span>(<span class="string">"user:add"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">(@Valid User user)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>å½“ç”¨æˆ·æ²¡æœ‰<code>user:add</code>æƒé™æ—¶ï¼Œç³»ç»Ÿå°†æŠ›å‡º<code>UnauthorizedException</code>å¼‚å¸¸ï¼Œç”±<code>GlobalExceptionHandler</code>æ•è·ï¼Œè¿”å›403çŠ¶æ€ç ã€‚</p><p>æ›´å¤šShiroæä¾›çš„æƒé™æ³¨è§£å¯ä»¥å‚è€ƒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¡¨ç¤ºå½“å‰Subjectå·²ç»é€šè¿‡loginè¿›è¡Œäº†èº«ä»½éªŒè¯ï¼›å³Subject.isAuthenticated()è¿”å›trueã€‚</span></span><br><span class="line"><span class="meta">@RequiresAuthentication</span>  </span><br><span class="line"> </span><br><span class="line"><span class="comment">// è¡¨ç¤ºå½“å‰Subjectå·²ç»èº«ä»½éªŒè¯æˆ–è€…é€šè¿‡è®°ä½æˆ‘ç™»å½•çš„ã€‚</span></span><br><span class="line"><span class="meta">@RequiresUser</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment">// è¡¨ç¤ºå½“å‰Subjectæ²¡æœ‰èº«ä»½éªŒè¯æˆ–é€šè¿‡è®°ä½æˆ‘ç™»å½•è¿‡ï¼Œå³æ˜¯æ¸¸å®¢èº«ä»½ã€‚</span></span><br><span class="line"><span class="meta">@RequiresGuest</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment">// è¡¨ç¤ºå½“å‰Subjectéœ€è¦è§’è‰²adminå’Œuserã€‚  </span></span><br><span class="line"><span class="meta">@RequiresRoles</span>(value=&#123;<span class="string">"admin"</span>, <span class="string">"user"</span>&#125;, logical= Logical.AND)  </span><br><span class="line"></span><br><span class="line"><span class="comment">// è¡¨ç¤ºå½“å‰Subjectéœ€è¦æƒé™user:aæˆ–user:bã€‚</span></span><br><span class="line"><span class="meta">@RequiresPermissions</span> (value=&#123;<span class="string">"user:a"</span>, <span class="string">"user:b"</span>&#125;, logical= Logical.OR)</span><br></pre></td></tr></table></figure><p></p><h3 id="å¤šæ•°æ®æº"><a href="#å¤šæ•°æ®æº" class="headerlink" title="å¤šæ•°æ®æº"></a>å¤šæ•°æ®æº</h3><p>å¤šæ•°æ®æºé‡‡ç”¨çš„æ˜¯MyBatis Plusæä¾›çš„æ–¹æ¡ˆï¼š<a href="https://mp.baomidou.com/guide/dynamic-datasource.html" target="_blank" rel="noopener">https://mp.baomidou.com/guide/dynamic-datasource.html</a></p><h3 id="ä»£ç ç”Ÿæˆ"><a href="#ä»£ç ç”Ÿæˆ" class="headerlink" title="ä»£ç ç”Ÿæˆ"></a>ä»£ç ç”Ÿæˆ</h3><p>ç›®å‰åªæœ‰åç«¯ä»£ç ç”Ÿæˆå™¨ï¼Œé‡‡ç”¨çš„æ˜¯MyBatis Plusæä¾›çš„æ–¹æ¡ˆï¼Œå¯¹åº”æºç <code>cc.mrbird.febs.common.generator.CodeGenerator</code>ï¼Œæ‰§è¡Œå…¶mainæ–¹æ³•ï¼Œç„¶åè¾“å…¥è¡¨åï¼Œå°±å¯ä»¥ç”Ÿæˆç›¸åº”çš„domainã€daoã€serviceã€controllerã€mapper.xmlã€‚</p><h3 id="Excelå¯¼å…¥å¯¼å‡º"><a href="#Excelå¯¼å…¥å¯¼å‡º" class="headerlink" title="Excelå¯¼å…¥å¯¼å‡º"></a>Excelå¯¼å…¥å¯¼å‡º</h3><p>Excelå¯¼å…¥å¯¼å‡ºä½¿ç”¨çš„æ’ä»¶ä¸ºï¼š<a href="https://gitee.com/wuwenze/ExcelKit" target="_blank" rel="noopener">https://gitee.com/wuwenze/ExcelKit</a>ï¼Œå…·ä½“æ“ä½œè§„åˆ™å¯ä»¥ä»”ç»†é˜…è¯»è¿™ä¸ªé¡¹ç›®çš„Readme.md</p><h3 id="ç»Ÿä¸€å‚æ•°æ ¡éªŒ"><a href="#ç»Ÿä¸€å‚æ•°æ ¡éªŒ" class="headerlink" title="ç»Ÿä¸€å‚æ•°æ ¡éªŒ"></a>ç»Ÿä¸€å‚æ•°æ ¡éªŒ</h3><p>ç»Ÿä¸€å‚æ•°æ ¡éªŒå¯ä»¥å‚è€ƒæˆ‘çš„åšå®¢ï¼š<a href="https://mrbird.cc/Spring-Boot-Hibernate-Validator-Params-Check.html">Spring Booté…åˆHibernate Validatorå‚æ•°æ ¡éªŒ</a>ã€‚</p><h3 id="SQLæ‰“å°"><a href="#SQLæ‰“å°" class="headerlink" title="SQLæ‰“å°"></a>SQLæ‰“å°</h3><p>SQLæ‰“å°é‡‡ç”¨çš„æ’ä»¶ä¸º<a href="https://p6spy.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">p6spy</a>ï¼Œè¦å¼€å¯p6spyçš„SQLæ‰“å°åŠŸèƒ½ï¼Œåªéœ€å°†é…ç½®æ–‡ä»¶application.ymlä¸­çš„<code>spring.datasource.dynamic.p6spy</code>æ”¹ä¸º<code>true</code>å³å¯ã€‚</p><p>åœ¨p6spy.propertiesæ–‡ä»¶ä¸­å¯ä»¥é…ç½®æ‰“å°è§„åˆ™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿè®°å½• sql</span><br><span class="line">appender=com.p6spy.engine.spy.appender.Slf4JLogger</span><br><span class="line"># è‡ªå®šä¹‰æ—¥å¿—æ‰“å°</span><br><span class="line">logMessageFormat=cc.mrbird.febs.common.config.P6spySqlFormatConfig</span><br><span class="line"># æ˜¯å¦å¼€å¯æ…¢ SQLè®°å½•</span><br><span class="line">outagedetection=true</span><br><span class="line"># æ…¢ SQLè®°å½•æ ‡å‡† 2 ç§’</span><br><span class="line">outagedetectioninterval=2</span><br><span class="line"># å¼€å¯è¿‡æ»¤</span><br><span class="line">filter=true</span><br><span class="line"># åŒ…å« QRTZçš„ä¸æ‰“å°</span><br><span class="line">exclude=QRTZ</span><br></pre></td></tr></table></figure><p></p><p>SQLæ‰“å°æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2019-04-08 15:29:50 | INFO  | http-nio-9527-exec-1 | p6spy | 2019-04-08 15:29:50 | è€—æ—¶ 73 ms | SQL è¯­å¥ï¼š</span><br><span class="line">UPDATE t_user SET last_login_time=&apos;2019-04-08T15:29:50.724+0800&apos; WHERE username = &apos;mrbird&apos;;</span><br><span class="line">2019-04-08 15:29:50 | INFO  | http-nio-9527-exec-1 | p6spy | 2019-04-08 15:29:50 | è€—æ—¶ 0 ms | SQL è¯­å¥ï¼š</span><br><span class="line">SELECT USER_ID,username,password,dept_id,email,mobile,status,create_time,modify_time,last_login_time,ssex,description,avatar FROM t_user WHERE username = &apos;mrbird&apos;;</span><br><span class="line">2019-04-08 15:29:52 | INFO  | http-nio-9527-exec-1 | p6spy | 2019-04-08 15:29:52 | è€—æ—¶ 489 ms | SQL è¯­å¥ï¼š</span><br><span class="line">INSERT INTO t_login_log ( username, login_time, location, ip ) VALUES ( &apos;mrbird&apos;, &apos;2019-04-08T15:29:50.874+0800&apos;, &apos;&apos;, &apos;127.0.0.1&apos; );</span><br><span class="line">2019-04-08 15:45:20 | INFO  | http-nio-9527-exec-7 | p6spy | 2019-04-08 15:45:20 | è€—æ—¶ 1 ms | SQL è¯­å¥ï¼š</span><br><span class="line">UPDATE t_user SET last_login_time=&apos;2019-04-08T15:45:20.193+0800&apos; WHERE username = &apos;scott&apos;;</span><br><span class="line">2019-04-08 15:45:20 | INFO  | http-nio-9527-exec-7 | p6spy | 2019-04-08 15:45:20 | è€—æ—¶ 0 ms | SQL è¯­å¥ï¼š</span><br><span class="line">SELECT USER_ID,username,password,dept_id,email,mobile,status,create_time,modify_time,last_login_time,ssex,description,avatar FROM t_user WHERE username = &apos;scott&apos;;</span><br><span class="line">2019-04-08 15:45:21 | INFO  | http-nio-9527-exec-7 | p6spy | 2019-04-08 15:45:21 | è€—æ—¶ 89 ms | SQL è¯­å¥ï¼š</span><br><span class="line">INSERT INTO t_login_log ( username, login_time, location, ip ) VALUES ( &apos;scott&apos;, &apos;2019-04-08T15:45:20.466+0800&apos;, &apos;&apos;, &apos;127.0.0.1&apos; );</span><br></pre></td></tr></table></figure><div class="note info"><p>å¼€å¯è¿™ä¸ªåŠŸèƒ½æ–¹ä¾¿æˆ‘ä»¬å¼€å‘è°ƒè¯•ï¼Œç”Ÿäº§ç¯å¢ƒæœ€å¥½å…³é—­è¿™ä¸ªåŠŸèƒ½ï¼Œå› ä¸ºå®ƒåœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šé€ æˆæ€§èƒ½è€—æŸã€‚</p></div><p>æ›´å¤šp6psyçš„é…ç½®å¯ä»¥å‚è€ƒï¼š<a href="https://p6spy.readthedocs.io/en/latest/configandusage.html" target="_blank" rel="noopener">https://p6spy.readthedocs.io/en/latest/configandusage.html</a></p><h3 id="AOPè®°å½•æ“ä½œæ—¥å¿—"><a href="#AOPè®°å½•æ“ä½œæ—¥å¿—" class="headerlink" title="AOPè®°å½•æ“ä½œæ—¥å¿—"></a>AOPè®°å½•æ“ä½œæ—¥å¿—</h3><p>å…·ä½“å¯ä»¥å‚è€ƒæˆ‘çš„åšå®¢ï¼š<a href="https://mrbird.cc/Spring-Boot-AOP%20log.html">Spring Boot AOPè®°å½•ç”¨æˆ·æ“ä½œæ—¥å¿—</a>ã€‚</p><p>è®°å½•æ“ä½œæ—¥å¿—çš„è¿‡ç¨‹å¯ä»¥æ”¹ä¸ºå¼‚æ­¥çš„æ–¹å¼ï¼Œè¿™æ ·ä¸ä¼šé€ æˆæ¥å£æ€§èƒ½æŸè€—ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„åšå®¢ï¼š<a href="https://mrbird.cc/Spring-Boot-Async.html">Spring Boot ä¸­çš„å¼‚æ­¥è°ƒç”¨</a>ã€‚</p><h3 id="æ¥å£é™æµ"><a href="#æ¥å£é™æµ" class="headerlink" title="æ¥å£é™æµ"></a>æ¥å£é™æµ</h3><p>é¡¹ç›®ä¸­<code>@Limit</code>æ³¨è§£å¯ä»¥å®ç°æ¥å£çš„é™æµã€‚å³è§„å®šä¸€æ®µæ—¶é—´å†…æœ€å¤šå¯ä»¥è®¿é—®è¯¥æ¥å£çš„æ¬¡æ•°ï¼Œè¶…è¿‡è¿™ä¸ªæ¬¡æ•°åˆ™æŠ›å‡º<code>LimitAccessException</code>å¼‚å¸¸ã€‚<code>@Limit</code>æ³¨è§£å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cc.mrbird.common.domain.LimitType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Limit &#123;</span><br><span class="line">    <span class="comment">// èµ„æºåç§°ï¼Œç”¨äºæè¿°æ¥å£åŠŸèƒ½</span></span><br><span class="line">    <span class="function">String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">    <span class="comment">// èµ„æº key</span></span><br><span class="line">    <span class="function">String <span class="title">key</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">    <span class="comment">// key prefix</span></span><br><span class="line">    <span class="function">String <span class="title">prefix</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">    <span class="comment">// æ—¶é—´çš„ï¼Œå•ä½ç§’</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">period</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">// é™åˆ¶è®¿é—®æ¬¡æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">count</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">// é™åˆ¶ç±»å‹</span></span><br><span class="line">    <span class="function">LimitType <span class="title">limitType</span><span class="params">()</span> <span class="keyword">default</span> LimitType.CUSTOMER</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>å…¶ä¸­ï¼ŒlimitTypeåŒ…å«ä¼ ç»Ÿç±»å‹é™æµå’Œæ ¹æ®IPé™æµï¼Œå…¶ä¸ºæšä¸¾ç±»å‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> LimitType &#123;</span><br><span class="line">    <span class="comment">// ä¼ ç»Ÿç±»å‹</span></span><br><span class="line">    CUSTOMER,</span><br><span class="line">    <span class="comment">// æ ¹æ® IP é™åˆ¶</span></span><br><span class="line">    IP;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>ä¸‹é¢ä¸¾ä¸ªä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cc.mrbird.common.annotation.Limit;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicInteger ATOMIC_INTEGER = <span class="keyword">new</span> AtomicInteger();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Limit</span>(key = <span class="string">"test"</span>, period = <span class="number">600</span>, count = <span class="number">10</span>, name = <span class="string">"resource"</span>, prefix = <span class="string">"limit"</span>)</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">testLimiter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ATOMIC_INTEGER.incrementAndGet();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>ä¸Šé¢é…ç½®è¡¨ç¤ºä½¿ç”¨ä¼ ç»Ÿé™æµçš„æ–¹å¼ï¼ŒtestLimiteræ–¹æ³•åœ¨600ç§’å†…æœ€å¤šåªèƒ½è®¿é—®10æ¬¡ã€‚å½“600ç§’å†…ç¬¬11æ¬¡è®¿é—®è¯¥æ¥å£æ—¶ï¼Œæ¥å£å°†æŠ›å‡º<code>LimitAccessException</code>å¼‚å¸¸ã€‚</p><h3 id="Shiroæ•™ç¨‹"><a href="#Shiroæ•™ç¨‹" class="headerlink" title="Shiroæ•™ç¨‹"></a>Shiroæ•™ç¨‹</h3><ol><li><p><a href="https://mrbird.cc/Apache%20Shiro%E7%AE%80%E4%BB%8B.html">Apache Shiroç®€ä»‹</a></p></li><li><p><a href="https://mrbird.cc/Spring-Boot-shiro%20Authentication.html">Spring Boot Shiroç”¨æˆ·è®¤è¯</a></p></li><li><p><a href="https://mrbird.cc/Spring-Boot-Shiro%20Remember-Me.html">Spring Boot Shiro æ·»åŠ è®°ä½æˆ‘åŠŸèƒ½</a></p></li><li><p><a href="https://mrbird.cc/Spring-Boot-Shiro%20Authorization.html">Spring Boot Shiroæƒé™æ§åˆ¶</a></p></li><li><p><a href="https://mrbird.cc/Spring-Boot-Shiro%20cache.html">Spring Boot Shiroä¸­ä½¿ç”¨ç¼“å­˜</a></p></li><li><p><a href="https://mrbird.cc/Spring-Boot-Themeleaf%20Shiro%20tag.html">Spring Boot Thymeleafä¸­ä½¿ç”¨Shiroæ ‡ç­¾</a></p></li><li><p><a href="https://mrbird.cc/Spring-Boot-Shiro%20session.html">Spring Boot Shiroåœ¨çº¿ä¼šè¯ç®¡ç†</a></p></li></ol><h3 id="Shiroå¦‚ä½•æ•´åˆJWT"><a href="#Shiroå¦‚ä½•æ•´åˆJWT" class="headerlink" title="Shiroå¦‚ä½•æ•´åˆJWT"></a>Shiroå¦‚ä½•æ•´åˆJWT</h3><p>Shiroå¦‚ä½•æ•´åˆJWTå¯ä»¥å‚è€ƒï¼š<a href="https://gitlab.com/wuyouzhuguli/shiro_jwt" target="_blank" rel="noopener">https://gitlab.com/wuyouzhuguli/shiro_jwt</a></p><p>ä¸ºäº†ç®€åŒ–è¿‡ç¨‹ï¼Œä¾‹å­æ²¡æœ‰ä½¿ç”¨æ•°æ®åº“å’ŒRedisï¼Œåœ¨å†…å­˜ä¸­æ¨¡æ‹Ÿäº†ä¸¤ä¸ªç”¨æˆ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¨¡æ‹Ÿä¸¤ä¸ªç”¨æˆ·</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> List&lt;User&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;User&gt; <span class="title">users</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;User&gt; users = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿä¸¤ä¸ªç”¨æˆ·ï¼š</span></span><br><span class="line">    <span class="comment">// 1. ç”¨æˆ·å adminï¼Œå¯†ç  123456ï¼Œè§’è‰² adminï¼ˆç®¡ç†å‘˜ï¼‰ï¼Œæƒé™ "user:add"ï¼Œ"user:view"</span></span><br><span class="line">    <span class="comment">// 1. ç”¨æˆ·å scottï¼Œå¯†ç  123456ï¼Œè§’è‰² registï¼ˆæ³¨å†Œç”¨æˆ·ï¼‰ï¼Œæƒé™ "user:view"</span></span><br><span class="line">    users.add(<span class="keyword">new</span> User(</span><br><span class="line">            <span class="string">"admin"</span>,</span><br><span class="line">            <span class="string">"bfc62b3f67a4c3e57df84dad8cc48a3b"</span>,</span><br><span class="line">            <span class="keyword">new</span> HashSet&lt;&gt;(Collections.singletonList(<span class="string">"admin"</span>)),</span><br><span class="line">            <span class="keyword">new</span> HashSet&lt;&gt;(Arrays.asList(<span class="string">"user:add"</span>, <span class="string">"user:view"</span>))));</span><br><span class="line">    users.add(<span class="keyword">new</span> User(</span><br><span class="line">            <span class="string">"scott"</span>,</span><br><span class="line">            <span class="string">"11bd73355c7bbbac151e4e4f943e59be"</span>,</span><br><span class="line">            <span class="keyword">new</span> HashSet&lt;&gt;(Collections.singletonList(<span class="string">"regist"</span>)),</span><br><span class="line">            <span class="keyword">new</span> HashSet&lt;&gt;(Collections.singletonList(<span class="string">"user:view"</span>))));</span><br><span class="line">    <span class="keyword">return</span> users;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>å¯ä»¥ä½¿ç”¨PostManè¿›è¡Œæ¥å£æµ‹è¯•ã€‚</p><h2 id="å‰ç«¯é¡¹ç›®ä»‹ç»"><a href="#å‰ç«¯é¡¹ç›®ä»‹ç»" class="headerlink" title="å‰ç«¯é¡¹ç›®ä»‹ç»"></a>å‰ç«¯é¡¹ç›®ä»‹ç»</h2><h3 id="é¡¹ç›®ç»“æ„-1"><a href="#é¡¹ç›®ç»“æ„-1" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><p>é¡¹ç›®æœºæ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="img/febsvue/2019-04-08_185510.png" alt="2019-04-08_185510.png"></p><h3 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h3><p>åœ¨ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œé¡¹ç›®ä¼šé€šè¿‡Vuexå’Œlocalstorageå­˜å‚¨ä¸€äº›æ•°æ®ä¾›é¡¹ç›®å…¨å±€ä½¿ç”¨ã€‚</p><p>æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œå½“ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œåç«¯ä¼šè¿”å›å¦‚ä¸‹æ•°æ®ï¼š</p><ol><li><p>tokenï¼štokenï¼›</p></li><li><p>exipreTimeï¼štokenè¿‡æœŸæ—¶é—´ï¼›</p></li><li><p>rolesï¼šç”¨æˆ·è§’è‰²ï¼›</p></li><li><p>permissionsï¼šç”¨æˆ·æƒé™ï¼›</p></li><li><p>configï¼šç”¨æˆ·å‰ç«¯ç³»ç»Ÿçš„ä¸ªæ€§åŒ–é…ç½®ï¼›</p></li><li><p>userï¼šç”¨æˆ·ä¿¡æ¯ï¼ˆä¸åŒ…æ‹¬å¯†ç ï¼‰ã€‚</p></li></ol><p>åœ¨src/views/login/Login.vueæ–‡ä»¶ä¸­ä½ ä¼šçœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">...mapMutations(&#123;</span><br><span class="line">  setToken: <span class="string">'account/setToken'</span>,</span><br><span class="line">  setExpireTime: <span class="string">'account/setExpireTime'</span>,</span><br><span class="line">  setPermissions: <span class="string">'account/setPermissions'</span>,</span><br><span class="line">  setRoles: <span class="string">'account/setRoles'</span>,</span><br><span class="line">  setUser: <span class="string">'account/setUser'</span>,</span><br><span class="line">  setTheme: <span class="string">'setting/setTheme'</span>,</span><br><span class="line">  setLayout: <span class="string">'setting/setLayout'</span>,</span><br><span class="line">  setMultipage: <span class="string">'setting/setMultipage'</span>,</span><br><span class="line">  fixSiderbar: <span class="string">'setting/fixSiderbar'</span>,</span><br><span class="line">  fixHeader: <span class="string">'setting/fixHeader'</span>,</span><br><span class="line">  setColor: <span class="string">'setting/setColor'</span></span><br><span class="line">&#125;),</span><br><span class="line">saveLoginData (data) &#123;</span><br><span class="line">  <span class="keyword">this</span>.setToken(data.token)</span><br><span class="line">  <span class="keyword">this</span>.setExpireTime(data.exipreTime)</span><br><span class="line">  <span class="keyword">this</span>.setUser(data.user)</span><br><span class="line">  <span class="keyword">this</span>.setPermissions(data.permissions)</span><br><span class="line">  <span class="keyword">this</span>.setRoles(data.roles)</span><br><span class="line">  <span class="keyword">this</span>.setTheme(data.config.theme)</span><br><span class="line">  <span class="keyword">this</span>.setLayout(data.config.layout)</span><br><span class="line">  <span class="keyword">this</span>.setMultipage(data.config.multiPage === <span class="string">'1'</span>)</span><br><span class="line">  <span class="keyword">this</span>.fixSiderbar(data.config.fixSiderbar === <span class="string">'1'</span>)</span><br><span class="line">  <span class="keyword">this</span>.fixHeader(data.config.fixHeader === <span class="string">'1'</span>)</span><br><span class="line">  <span class="keyword">this</span>.setColor(data.config.color)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>è¿™å°†æŠŠç™»å½•æ¥å£è¿”å›çš„æ•°æ®å­˜å‚¨åˆ°Vuexå’Œæµè§ˆå™¨çš„localstorageä¸­ã€‚</p><p>å­˜å‚¨Tokençš„åŸå› æ˜¯ï¼Œåç»­éœ€è¦è®¤è¯çš„è¯·æ±‚ï¼Œéƒ½ä¼šåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦è¿™ä¸ªTokenï¼›å­˜å‚¨ExpireTimeçš„åŸå› æ˜¯ä¸ºäº†ä¼˜åŒ–è®¤è¯è¿‡æœŸæ—¶çš„ç”¨æˆ·ä½“éªŒï¼›å­˜å‚¨ç”¨æˆ·ä¿¡æ¯çš„åŸå› æ˜¯ä¸ºäº†ä¾›ä¸ªäººä¸­å¿ƒå’Œç³»ç»Ÿä¸»é¡µä½¿ç”¨ï¼›å­˜å‚¨è§’è‰²å’Œæƒé™æ˜¯ä¸ºäº†åˆ¤æ–­é¡µé¢æŒ‰é’®æ¸²æŸ“ä¸å¦ï¼›å­˜å‚¨ç”¨æˆ·ä¸ªæ€§åŒ–é…ç½®çš„åŸå› æ˜¯ä¸ºäº†é€šè¿‡è¿™äº›é…ç½®æ¸²æŸ“ä¸åŒçš„ç³»ç»Ÿç•Œé¢ã€‚</p><h3 id="è·¯ç”±å¯¼èˆªå®ˆå«"><a href="#è·¯ç”±å¯¼èˆªå®ˆå«" class="headerlink" title="è·¯ç”±å¯¼èˆªå®ˆå«"></a>è·¯ç”±å¯¼èˆªå®ˆå«</h3><p>è·¯ç”±å¯¼èˆªå®ˆå«ä»£ç ä½ç½®ï¼šfrontend/src/router/index.jsï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">'/login'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> asyncRouter</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼èˆªå®ˆå«ï¼Œæ¸²æŸ“åŠ¨æ€è·¯ç”±</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (whiteList.indexOf(to.path) !== <span class="number">-1</span>) &#123;</span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> token = db.get(<span class="string">'USER_TOKEN'</span>)</span><br><span class="line">  <span class="keyword">let</span> user = db.get(<span class="string">'USER'</span>)</span><br><span class="line">  <span class="keyword">let</span> userRouter = get(<span class="string">'USER_ROUTER'</span>)</span><br><span class="line">  <span class="keyword">if</span> (token.length &amp;&amp; user) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!asyncRouter) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!userRouter) &#123;</span><br><span class="line">        request.get(<span class="string">`menu/<span class="subst">$&#123;user.username&#125;</span>`</span>).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          asyncRouter = res.data</span><br><span class="line">          save(<span class="string">'USER_ROUTER'</span>, asyncRouter)</span><br><span class="line">          go(to, next)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        asyncRouter = userRouter</span><br><span class="line">        go(to, next)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next(<span class="string">'/login'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">go</span> (<span class="params">to, next</span>) </span>&#123;</span><br><span class="line">  asyncRouter = filterAsyncRouter(asyncRouter)</span><br><span class="line">  router.addRoutes(asyncRouter)</span><br><span class="line">  next(&#123;...to, <span class="attr">replace</span>: <span class="literal">true</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p></p><p>ä¸»è¦é€»è¾‘åˆ†ä¸ºä¸‹é¢å‡ æ­¥ï¼š</p><ol><li><p>åˆ¤æ–­è¦è·³è½¬çš„è·¯ç”±åœ°å€æ˜¯å¦åœ¨è·¯ç”±ç™½åå•å†…ï¼Œæ˜¯çš„è¯æ”¾è¡Œï¼Œä¸æ˜¯çš„è¯è¿›è¡Œç¬¬2æ­¥ï¼›</p></li><li><p>ä»å†…å­˜ä¸­è·å–tokenå’Œç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿›è¡Œç¬¬3æ­¥ï¼Œä¸å­˜åœ¨è·³è½¬åˆ°ç™»å½•é¡µï¼›</p></li><li><p>åˆ¤æ–­åŠ¨æ€è·¯ç”±ä¿¡æ¯æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™æ”¾è¡Œï¼Œä¸å­˜åœ¨åˆ™è¿›è¡Œç¬¬4æ­¥ï¼›</p></li><li><p>åˆ¤æ–­ç”¨æˆ·è·¯ç”±æ˜¯å¦å·²ç»åŠ è½½ï¼Œæ˜¯çš„è¯å°†ç”¨æˆ·è·¯ç”±èµ‹å€¼ç»™åŠ¨æ€è·¯ç”±ï¼Œå¹¶æ‰§è¡Œè·¯ç”±æ·»åŠ æ“ä½œï¼Œç„¶åè·³è½¬ï¼›å¦‚æœç”¨æˆ·è·¯ç”±ä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œç¬¬5æ­¥ï¼›</p></li><li><p>æ ¹æ®ç”¨æˆ·åä»åå°è·å–ç”¨æˆ·è·¯ç”±ä¿¡æ¯ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°å†…å­˜ä¸­ï¼Œå†æ‰§è¡Œè·¯ç”±æ·»åŠ æ“ä½œï¼Œç„¶åè·³è½¬ã€‚</p></li></ol><h3 id="æƒé™æ§åˆ¶-1"><a href="#æƒé™æ§åˆ¶-1" class="headerlink" title="æƒé™æ§åˆ¶"></a>æƒé™æ§åˆ¶</h3><p>åœ¨å‰ç«¯é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†é€šè¿‡ä¸åŒç”¨æˆ·è·å–ä¸åŒçš„è·¯ç”±ï¼Œä»¥æ­¤æ¸²æŸ“å‡ºä¸åŒçš„èœå•åˆ—è¡¨åŠŸèƒ½ï¼Œæ­¤å¤–é¡µé¢ä¸Šçš„æ“ä½œæŒ‰é’®ä¹Ÿå¿…é¡»è¿›è¡Œæƒé™æ§åˆ¶ã€‚</p><p>æ­£å¦‚å‰é¢æ‰€è¿°ï¼Œåœ¨ç™»å½•æˆåŠŸåï¼Œç³»ç»Ÿä¼šæŠŠç”¨æˆ·çš„è§’è‰²å’Œæƒé™ä¿¡æ¯å­˜å‚¨åˆ°äº†å†…å­˜ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›ä¿¡æ¯ç»“åˆ<a href="https://cn.vuejs.org/v2/guide/custom-directive.html" target="_blank" rel="noopener"> è‡ªå®šä¹‰VueæŒ‡ä»¤ </a>çš„æ–¹å¼æ¥å®ç°æŒ‰é’®çš„æƒé™æ§åˆ¶ã€‚</p><p>ç›®å‰æ”¯æŒçš„å’Œæƒé™ç›¸å…³çš„VueæŒ‡ä»¤æœ‰ï¼š</p><table><thead><tr><th>æŒ‡ä»¤</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>v-hasPermission</td><td>å½“ç”¨æˆ·æ‹¥æœ‰åˆ—å‡ºçš„æƒé™çš„æ—¶å€™ï¼Œæ¸²æŸ“è¯¥å…ƒç´ </td><td><code>&lt;template v-hasPermission=&quot;&#39;user:add&#39;,&#39;user:update&#39;&quot;&gt;&lt;span&gt;hello&lt;/span&gt;&lt;/template&gt;</code></td></tr><tr><td>v-hasAnyPermission</td><td>å½“ç”¨æˆ·æ‹¥æœ‰åˆ—å‡ºçš„ä»»æ„ä¸€é¡¹æƒé™çš„æ—¶å€™ï¼Œæ¸²æŸ“è¯¥å…ƒç´ </td><td><code>&lt;template v-hasAnyPermission=&quot;&#39;user:add&#39;,&#39;user:update&#39;&quot;&gt;&lt;span&gt;hello&lt;/span&gt;&lt;/template&gt;</code></td></tr><tr><td>v-hasRole</td><td>å½“ç”¨æˆ·æ‹¥æœ‰åˆ—å‡ºçš„è§’è‰²çš„æ—¶å€™ï¼Œæ¸²æŸ“è¯¥å…ƒç´ </td><td><code>&lt;template v-hasRole=&quot;&#39;admin&#39;,&#39;register&#39;&quot;&gt;&lt;span&gt;hello&lt;/span&gt;&lt;/template&gt;</code></td></tr><tr><td>v-hasAnyRole</td><td>å½“ç”¨æˆ·æ‹¥æœ‰åˆ—å‡ºçš„ä»»æ„ä¸€ä¸ªè§’è‰²çš„æ—¶å€™ï¼Œæ¸²æŸ“è¯¥å…ƒç´ </td><td><code>&lt;template v-hasAnyRole=&quot;&#39;admin&#39;,&#39;register&#39;&quot;&gt;&lt;span&gt;hello&lt;/span&gt;&lt;/template&gt;</code></td></tr><tr><td>hasNoPermission</td><td>å½“ç”¨æˆ·æ²¡æœ‰åˆ—å‡ºçš„æƒé™çš„æ—¶å€™ï¼Œæ¸²æŸ“è¯¥å…ƒç´ </td><td><code>&lt;template v-hasNoPermission=&quot;&#39;user:add&#39;,&#39;register&#39;&quot;&gt;&lt;span&gt;æ— æ“ä½œæƒé™&lt;/span&gt;&lt;/template&gt;</code></td></tr></tbody></table><p>ä»¥<code>v-hasPermission=&quot;user:add&quot;</code>ä¸ºä¾‹ï¼Œè¯¦ç»†ä»‹ç»ä¸‹è‡ªå®šä¹‰æƒé™VueæŒ‡ä»¤çš„å®ç°è¿‡ç¨‹ï¼š</p><ol><li><p>åœ¨src/utils/permissionDirect.jsä¸­å®šä¹‰å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">export</span> <span class="keyword">const</span> hasPermission = &#123;</span><br><span class="line">  install (Vue) &#123;</span><br><span class="line">    Vue.directive(<span class="string">'hasPermission'</span>, &#123;</span><br><span class="line">      bind (el, binding, vnode) &#123;</span><br><span class="line">        <span class="keyword">let</span> permissions = vnode.context.$store.state.account.permissions</span><br><span class="line">        <span class="keyword">let</span> value = binding.value.split(<span class="string">','</span>)</span><br><span class="line">        <span class="keyword">let</span> flag = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> value) &#123;</span><br><span class="line">          <span class="keyword">if</span> (!permissions.includes(v)) &#123;</span><br><span class="line">            flag = <span class="literal">false</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">          <span class="keyword">if</span> (!el.parentNode) &#123;</span><br><span class="line">            el.style.display = <span class="string">'none'</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            el.parentNode.removeChild(el)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä»Vuexä¸­è·å–äº†ç”¨æˆ·æ‰€æ‹¥æœ‰çš„æƒé™ï¼Œç„¶ååˆ¤æ–­è¿™äº›æƒé™ä¸­æ˜¯å¦åŒ…å«<code>user:add</code>ï¼Œå¦‚æœä¸åŒ…å«ï¼Œåˆ™å°†å¯¹åº”çš„å…ƒç´ ï¼ˆelï¼‰ç§»é™¤æˆ–è€…éšè—ã€‚æ‰€ä»¥å½“ç”¨æˆ·æ²¡æœ‰<code>user:add</code>æƒé™æ—¶ï¼Œä¸‹é¢çš„æŒ‰é’®å°†ä¸ä¼šè¢«æ¸²æŸ“åœ¨é¡µé¢ä¸Šï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-hasPermission</span>=<span class="string">"'user:add'"</span>&gt;</span><span class="tag">&lt;<span class="name">button</span>&gt;</span>æ–°å¢ç”¨æˆ·<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è¦è®©è‡ªå®šä¹‰VueæŒ‡ä»¤ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦åœ¨src/utils/install.jsä¸­å°†å…¶æ·»åŠ åˆ°Pluginsåˆ—è¡¨ã€‚</p></li></ol><h3 id="Axioså°è£…"><a href="#Axioså°è£…" class="headerlink" title="Axioså°è£…"></a>Axioså°è£…</h3><p>é¡¹ç›®ä½¿ç”¨Axiosæ’ä»¶æ¥å‘é€HTTPè¯·æ±‚ï¼Œå¹¶å¯¹å®ƒè¿›è¡Œäº†å°è£…ï¼ˆfrontend/src/utils/request.jsï¼‰ï¼Œè¿™é‡Œä¸»è¦è®²è¿°ä¸‹request.jsä¸­ä¸»è¦é€»è¾‘ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»Ÿä¸€é…ç½®</span></span><br><span class="line"><span class="keyword">let</span> FEBS_REQUEST = axios.create(&#123;</span><br><span class="line">  baseURL: <span class="string">'http://127.0.0.1:9527/'</span>,</span><br><span class="line">  responseType: <span class="string">'json'</span>,</span><br><span class="line">  validateStatus (status) &#123;</span><br><span class="line">    <span class="comment">// 200 å¤–çš„çŠ¶æ€ç éƒ½è®¤å®šä¸ºå¤±è´¥</span></span><br><span class="line">    <span class="keyword">return</span> status === <span class="number">200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™æ®µä»£ç å¯¹è¯·æ±‚è¿›è¡Œäº†ç»Ÿä¸€é…ç½®ï¼ŒbaseURLå®šä¹‰äº†åç«¯åœ°å€çš„åŸºç¡€è·¯å¾„ï¼ŒresponseTypeå®šä¹‰äº†å“åº”æ•°æ®ç±»å‹ä¸ºJSONï¼Œåªæœ‰çŠ¶æ€ç ä¸º200æ—¶æ‰è®¤å®šè¯·æ±‚æˆåŠŸã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‹¦æˆªè¯·æ±‚</span></span><br><span class="line">FEBS_REQUEST.interceptors.request.use(<span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> expireTime = store.state.account.expireTime</span><br><span class="line">  <span class="keyword">let</span> now = moment().format(<span class="string">'YYYYMMDDHHmmss'</span>)</span><br><span class="line">  <span class="comment">// è®©tokenæ—©10ç§’ç§è¿‡æœŸï¼Œæå‡â€œè¯·é‡æ–°ç™»å½•â€å¼¹çª—ä½“éªŒ</span></span><br><span class="line">  <span class="keyword">if</span> (now - expireTime &gt;= <span class="number">-10</span>) &#123;</span><br><span class="line">    Modal.error(&#123;</span><br><span class="line">      title: <span class="string">'ç™»å½•å·²è¿‡æœŸ'</span>,</span><br><span class="line">      content: <span class="string">'å¾ˆæŠ±æ­‰ï¼Œç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'</span>,</span><br><span class="line">      okText: <span class="string">'é‡æ–°ç™»å½•'</span>,</span><br><span class="line">      mask: <span class="literal">false</span>,</span><br><span class="line">      onOk: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    	  <span class="comment">// ä¸ºä»€ä¹ˆä¸ç›´æ¥è·³è½¬åˆ°ç™»å½•é¡µå‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºVueæ²¡æœ‰æä¾›æ¸…ç©ºè·¯ç”±çš„æ–¹æ³•ï¼Œåªèƒ½é€šè¿‡åˆ·æ–°é¡µé¢çš„æ–¹å¼</span></span><br><span class="line">    	  <span class="comment">// æ¥æ¸…é™¤ä¹‹å‰åŠ¨æ€æ·»åŠ çš„è·¯ç”±ä¿¡æ¯ã€‚</span></span><br><span class="line">          db.clear()</span><br><span class="line">          location.reload()</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æœ‰ tokenå°±å¸¦ä¸Š</span></span><br><span class="line">  <span class="keyword">if</span> (store.state.account.token) &#123;</span><br><span class="line">    config.headers.Authentication = store.state.account.token</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;, (error) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åœ¨Axiosçš„å‰ç½®æ‹¦æˆªä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­äº†tokenæ˜¯å¦å·²ç»è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸäº†åˆ™æ¸…ç©ºåœ¨ç™»å½•æ—¶ä¿å­˜çš„æ•°æ®ï¼Œå¹¶ä¸”åˆ·æ–°é¡µé¢ã€‚è¿™æ—¶å€™é€šè¿‡è·¯ç”±å¯¼èˆªå®ˆå«ï¼Œé¡µé¢ä¼šè¢«é‡å®šå‘åˆ°ç™»å½•é¡µé¢ï¼Œå¼•å¯¼ç”¨æˆ·é‡æ–°ç™»å½•ã€‚</p><p>å¦‚æœtokenæ²¡æœ‰è¿‡æœŸï¼Œåˆ™åœ¨è¯·æ±‚å¤´ä¸Šå¸¦ä¸Štokenä¿¡æ¯ã€‚<code>headers.Authentication</code>å’Œåç«¯ä»£ç ä¸­çš„TOKENåç§°ç›¸å¯¹åº”ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409101831.png" alt="QQæˆªå›¾20190409101831.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‹¦æˆªå“åº”</span></span><br><span class="line">FEBS_REQUEST.interceptors.response.use(<span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;, (error) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (error.response) &#123;</span><br><span class="line">    <span class="keyword">let</span> errorMessage = error.response.data === <span class="literal">null</span> ? <span class="string">'ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸ï¼Œè¯·è”ç³»ç½‘ç«™ç®¡ç†å‘˜'</span> : error.response.data.message</span><br><span class="line">    <span class="keyword">switch</span> (error.response.status) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">        notification.error(&#123;</span><br><span class="line">          message: <span class="string">'ç³»ç»Ÿæç¤º'</span>,</span><br><span class="line">          description: <span class="string">'å¾ˆæŠ±æ­‰ï¼Œèµ„æºæœªæ‰¾åˆ°'</span>,</span><br><span class="line">          duration: <span class="number">4</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">        notification.warn(&#123;</span><br><span class="line">          message: <span class="string">'ç³»ç»Ÿæç¤º'</span>,</span><br><span class="line">          description: <span class="string">'å¾ˆæŠ±æ­‰ï¼Œæ‚¨æ— æ³•è®¿é—®è¯¥èµ„æºï¼Œå¯èƒ½æ˜¯å› ä¸ºæ²¡æœ‰ç›¸åº”æƒé™æˆ–è€…ç™»å½•å·²å¤±æ•ˆ'</span>,</span><br><span class="line">          duration: <span class="number">4</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        notification.error(&#123;</span><br><span class="line">          message: <span class="string">'ç³»ç»Ÿæç¤º'</span>,</span><br><span class="line">          description: errorMessage,</span><br><span class="line">          duration: <span class="number">4</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬å®ç°äº†å¼‚å¸¸å“åº”çš„ç»Ÿä¸€å¤„ç†ï¼Œæ ¹æ®ä¸åŒçš„çŠ¶æ€ç ç»™äºˆä¸åŒçš„æç¤ºä¿¡æ¯ã€‚</p><p>æ­¤å¤–ï¼Œé¡¹ç›®è¿˜å¯¹å„ç§HTTPè¯·æ±‚è¿›è¡Œäº†å°è£…ï¼Œä¸‹é¢ä¸€ä¸€åˆ—ä¸¾å‡ºå®ƒä»¬çš„ç”¨æ³•ï¼š</p><p><strong>GETè¯·æ±‚</strong></p><p>æ–¹å¼ä¸€ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$get(<span class="string">'user'</span>, &#123;</span><br><span class="line">   ...params</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(r)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p>å› ä¸ºæˆ‘ä»¬åœ¨å‰é¢å·²ç»å®šä¹‰äº†åç«¯åœ°å€çš„åŸºç¡€è·¯å¾„ï¼Œæ‰€ä»¥ä¸Šé¢è¿™ä¸ªè¯·æ±‚çš„å®é™…åœ°å€ä¸ºï¼š<a href="http://127.0.0.1:9527/userã€‚" target="_blank" rel="noopener">http://127.0.0.1:9527/userã€‚</a></p><p>åœ¨å‰é¢æˆ‘ä»¬å·²ç»å¯¹å¼‚å¸¸å“åº”è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡catchæ¥è¦†ç›–ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$get(<span class="string">'user'</span>, &#123;</span><br><span class="line">   ...params</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(r)</span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">   alert(<span class="string">'å‡ºé”™å•¦'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ–¹å¼äºŒï¼ˆè·¯å¾„ä¼ å‚ï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$get(<span class="string">`menu/<span class="subst">$&#123;user.username&#125;</span>`</span>).then(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(r)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p>æ–¹å¼ä¸‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$get(<span class="string">`user?username=<span class="subst">$&#123;user.username&#125;</span>`</span>).then(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(r)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p><strong>POSTè¯·æ±‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$post(<span class="string">'user'</span>, &#123;</span><br><span class="line">   ...params</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(r)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p><strong>PUTè¯·æ±‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$put(<span class="string">'user'</span>, &#123;</span><br><span class="line">   ...params</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(r)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p><strong>DELETEè¯·æ±‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$<span class="keyword">delete</span>(<span class="string">'user/$&#123;user.userId&#125;'</span>).then(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(r)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p><strong>ä¸‹è½½æ–‡ä»¶</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$download(<span class="string">'file'</span>, &#123; ...params &#125;, <span class="string">'xxx.xx'</span>)</span><br></pre></td></tr></table></figure><p></p><p>xxx.xxä¸ºä¸‹è½½çš„æ–‡ä»¶åï¼Œæ¯”å¦‚ä¸‹è½½xlsxæ–‡ä»¶çš„è¯ä¸º Excelæ–‡ä»¶.xlsxï¼Œåç«¯æ¥å£è¿”å›æ•°æ®æµå³å¯ã€‚</p><p><strong>ä¸Šä¼ æ–‡ä»¶</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> formData = <span class="keyword">new</span> FormData($(<span class="string">"#form"</span>)[<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">this</span>.$upload(<span class="string">'upload'</span>, formData).then(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(r)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p>åç«¯ä»¥<code>MultipartFile</code>æ¥æ”¶æ–‡ä»¶å³å¯ã€‚</p><h3 id="è·¯å¾„é…ç½®"><a href="#è·¯å¾„é…ç½®" class="headerlink" title="è·¯å¾„é…ç½®"></a>è·¯å¾„é…ç½®</h3><p>åœ¨build/webpack.base.conf.jsä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€äº›è·¯å¾„å˜é‡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    ...</span><br><span class="line">    alias: &#123;</span><br><span class="line">      <span class="string">'vue$'</span>: <span class="string">'vue/dist/vue.esm.js'</span>,</span><br><span class="line">      <span class="string">'@'</span>: resolve(<span class="string">'src'</span>),</span><br><span class="line">      <span class="string">'~'</span>: resolve(<span class="string">'src/components'</span>),</span><br><span class="line">      <span class="string">'utils'</span>: resolve(<span class="string">'src/utils'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æ¯”å¦‚<code>~</code>ä»£è¡¨<code>src/components</code>è·¯å¾„ï¼Œåœ¨é¡¹ç›®ä¸­ï¼Œå¦‚æœè¦å¼•å…¥<code>src/components/test.vue</code>åªéœ€è¦è¿™æ ·åšå³å¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ~<span class="regexp">/test.vue</span></span><br></pre></td></tr></table></figure><p></p><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ï¼Œè€Œä¸ä½¿ç”¨è¿™äº›å˜é‡ã€‚</p><h3 id="ç¬¬ä¸‰æ–¹ç»„ä»¶ä»‹ç»"><a href="#ç¬¬ä¸‰æ–¹ç»„ä»¶ä»‹ç»" class="headerlink" title="ç¬¬ä¸‰æ–¹ç»„ä»¶ä»‹ç»"></a>ç¬¬ä¸‰æ–¹ç»„ä»¶ä»‹ç»</h3><p><a href="https://vue.ant.design/docs/vue/introduce-cn/" target="_blank" rel="noopener">Ant Design Vue</a>å·²ç»æä¾›äº†éå¸¸ä¸°å¯Œçš„ç»„ä»¶ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œé¡¹ç›®é‡Œä½¿ç”¨çš„å›¾è¡¨æ’ä»¶ä¸ºï¼š<a href="https://apexcharts.com/vue-chart-demos/line-charts/basic/" target="_blank" rel="noopener">apexcharts.js</a>ï¼Œå…¶å®˜æ–¹æ–‡æ¡£æä¾›äº†å¾ˆå¤šç¤ºä¾‹ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p><h3 id="å¼€å‘å»ºè®®"><a href="#å¼€å‘å»ºè®®" class="headerlink" title="å¼€å‘å»ºè®®"></a>å¼€å‘å»ºè®®</h3><p>ç›¸ä¿¡æ­£åœ¨é˜…è¯»æ–‡æ¡£çš„ä½ åæœ‰å…«ä¹æ˜¯ä¸€ååç«¯å¼€å‘è€…ï¼Œå¯èƒ½å¯¹å‰ç«¯ç‰¹åˆ«æ˜¯å¯¹Vueä¸å¤ªç†Ÿæ‚‰ï¼Œè¿™é‡Œç»™å‡ºå‡ ç‚¹æ”¹é€ frontendçš„å»ºè®®ï¼š</p><ol><li><p>è¦æœ‰ä¸€å®šçš„ES6è¯­æ³•åŸºç¡€ï¼Œå¯ä»¥å‚è€ƒ<a href="https://mrbird.cc/ES2015-Learn-Note.html"> ES6å­¦ä¹ ç¬”è®° </a>ï¼Œå¦‚æœè¦ç³»ç»Ÿå­¦ä¹ ES6ï¼Œæ¨èé˜®ä¸€å³°çš„ï¼š<a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener"> ECMAScript 6 å…¥é—¨ </a>ã€‚</p></li><li><p>Vueçš„å®˜æ–¹æ–‡æ¡£è¿˜æ˜¯æŒºè¯¦ç»†çš„ï¼Œå»ºè®®ä»”ç»†é˜…è¯»ï¼Œæˆ‘åœ¨å­¦ä¹ Vueçš„æ—¶å€™ä¹Ÿåšäº†ä¸€äº›ç¬”è®°ï¼Œå¯ä»¥å‚è€ƒï¼š<a href="https://mrbird.cc/Vue-Learn-Note.html">https://mrbird.cc/Vue-Learn-Note.html</a>ã€‚Vueçš„å­¦ä¹ è·¯çº¿ï¼šVueåŸºç¡€è¯­æ³• -&gt; Vuex -&gt; Vue Routerã€‚</p></li><li><p>å‰ç«¯ç»„ä»¶ç”¨çš„æ˜¯<a href="https://vue.ant.design/docs/vue/introduce-cn/" target="_blank" rel="noopener">Ant Design Vue</a>ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å®ƒæä¾›çš„ç»„ä»¶çš„æ—¶å€™ï¼Œå¤šé˜…è¯»å®ƒçš„ä½¿ç”¨æ–‡æ¡£ã€‚</p></li></ol><h2 id="å¼€å‘ç¤ºä¾‹"><a href="#å¼€å‘ç¤ºä¾‹" class="headerlink" title="å¼€å‘ç¤ºä¾‹"></a>å¼€å‘ç¤ºä¾‹</h2><h3 id="æ–°å»ºä¸€ä¸ªé¡µé¢"><a href="#æ–°å»ºä¸€ä¸ªé¡µé¢" class="headerlink" title="æ–°å»ºä¸€ä¸ªé¡µé¢"></a>æ–°å»ºä¸€ä¸ªé¡µé¢</h3><p>åœ¨frontendå·¥ç¨‹çš„src/viewsä¸‹æ–°å»ºä¸€ä¸ªtestç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªtest.vueæ–‡ä»¶ï¼š <img src="img/febsvue/QQæˆªå›¾20190409133947.png" alt="QQæˆªå›¾20190409133947.png"></p><p>å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>&#123;&#123;hello&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'test'</span>,</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      hello: <span class="string">'hello world'</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.test</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#42b984</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">font-size</span>: 1<span class="selector-class">.1rem</span>;</span></span><br><span class="line"><span class="undefined">    font-weight: 600;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>å¯åŠ¨é¡¹ç›®ï¼Œä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼Œç„¶ååœ¨èœå•ç®¡ç†ä¸­æ–°å»ºä¸€ä¸ªèœå•ï¼š</p><p><img src="img/febsvue/20190409134916.png" alt="QQæˆªå›¾20190409134916.png"></p><ol><li><p>èœå•URLï¼šè¿™é‡Œå¡«å†™/testçš„è¯ï¼Œåœ¨è®¿é—®è¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œæµè§ˆå™¨åœ°å€æ ä¸º<a href="http://localhost:8081/#/test" target="_blank" rel="noopener">http://localhost:8081/#/test</a>ï¼Œåªè¦ç¡®ä¿è¿™ä¸ªå€¼ä¸é‡å¤å³å¯ï¼›</p></li><li><p>ç»„ä»¶åœ°å€ï¼šå¯¹åº”è¦æ¸²æŸ“çš„Vueç»„ä»¶åœ°å€ï¼Œåœ¨è·¯ç”±å¯¼èˆªå®ˆå«ä¸­æœ‰å¦‚ä¸‹ä¸€æ®µä»£ç ï¼š</p><p><img src="img/febsvue/20190409135425.png" alt="QQæˆªå›¾20190409135425.png"></p><p>æ‰€ä»¥è¿™é‡Œå¡«test/testï¼Œå¯¹åº”<code>@/views/test/test.vue</code>ç»„ä»¶ã€‚</p></li><li><p>ç›¸å…³æƒé™ï¼šè®¿é—®è¿™ä¸ªé¡µé¢éœ€è¦<code>test:view</code>æƒé™ã€‚</p></li></ol><p>ç‚¹å‡»ç¡®å®šåï¼Œè¿™ä¸ªèœå•å°±è¢«å»ºå¥½äº†ï¼š</p><p><img src="img/febsvue/20190409135740.png" alt="QQæˆªå›¾20190409135740.png"></p><p>æ¥ç€ä¿®æ”¹ç®¡ç†å‘˜è§’è‰²ï¼Œå°†åˆšåˆšæ–°å»ºçš„èœå•æˆæƒç»™ç®¡ç†å‘˜ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409141220.png" alt="QQæˆªå›¾20190409141220.png"></p><p>ç‚¹å‡»ç¡®å®šä¿®æ”¹åï¼Œé‡æ–°ç™»å½•ç³»ç»Ÿï¼š</p><p><img src="img/febsvue/asdfasdfasfdasdf.png" alt="QQæˆªå›¾20190409141410.png"></p><h3 id="å¦‚ä½•æ–°å»ºä¸€ä¸ªå¤šçº§èœå•"><a href="#å¦‚ä½•æ–°å»ºä¸€ä¸ªå¤šçº§èœå•" class="headerlink" title="å¦‚ä½•æ–°å»ºä¸€ä¸ªå¤šçº§èœå•"></a>å¦‚ä½•æ–°å»ºä¸€ä¸ªå¤šçº§èœå•</h3><p>åœ¨æ–°å¢å¤šçº§èœå•å‰ï¼Œå…ˆäº†è§£ä¸‹ç³»ç»Ÿä¸­çš„ä¸€ä¸ªçº¦å®šï¼šåœ¨ä¸€ä¸ªå¤šçº§èœå•ä¸­ï¼Œ<strong>é¡¶çº§èœå•å¯¹åº”çš„ç»„ä»¶ä¸ºPageViewï¼Œæœ«çº§èœå•å¯¹åº”çš„ç»„ä»¶ä¸ºéœ€è¦æ¸²æŸ“çš„é¡µé¢ç»„ä»¶ï¼Œå‰©ä¸‹çš„ï¼ˆéé¡¶çº§ï¼Œéæœ«çº§çš„ä¸­é—´èœå•å¯¹åº”çš„ç»„ä»¶ä¸ºEmptyPageViewï¼‰</strong>ã€‚</p><p>æˆ‘ä»¬æ¥å»ºä¸€ä¸ªå››çº§èœå•ï¼Œé¦–å…ˆæ–°å¢ä¸€ä¸ªé¡¶çº§èœå•ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409142251.png" alt="QQæˆªå›¾20190409142251.png"></p><p>å› ä¸ºæ˜¯é¡¶çº§èœå•ï¼Œæ‰€ä»¥å¯¹åº”ç»„ä»¶å¡«PageViewã€‚</p><p>æ¥ç€æ–°å¢ç¬¬äºŒçº§èœå•ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409142642.png" alt="QQæˆªå›¾20190409142642.png"></p><p>å› ä¸ºå®ƒæ•°æ®ä¸­é—´èœå•ï¼ˆéé¡¶çº§éæœ«çº§ï¼‰æ‰€ä»¥å¯¹åº”ç»„ä»¶å¡«EmptyPageViewï¼Œä¸Šçº§èœå•å‹¾é€‰åˆšåˆšæ–°å»ºçš„ä¸€çº§èœå•ã€‚</p><p>ç»§ç»­æ–°å¢ä¸‰çº§èœå•ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409143223.png" alt="QQæˆªå›¾20190409143223.png"></p><p>å› ä¸ºå®ƒä¹Ÿæ˜¯ä¸€ä¸ªä¸­é—´èœå•ï¼Œæ‰€ä»¥å¯¹åº”ç»„ä»¶å¡«EmptyPageViewï¼Œä¸Šçº§èœå•å‹¾é€‰åˆšåˆšæ–°å»ºçš„äºŒçº§èœå•ã€‚</p><p>æœ€åå°†æˆ‘ä»¬å‰é¢å»ºå¥½çš„æµ‹è¯•é¡µé¢ä½œä¸ºæœ«çº§ï¼Œç‚¹å‡»æµ‹è¯•é¡µé¢åé¢çš„å°é½¿è½®æŒ‰é’®ï¼Œè¿›è¡Œä¿®æ”¹ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409143905.png" alt="QQæˆªå›¾20190409143905.png"></p><p>ç‚¹å‡»ç¡®å®šåä¸€ä¸ªå››çº§èœå•å°±å»ºå¥½äº†ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409143943.png" alt="QQæˆªå›¾20190409143943.png"></p><p>æœ€åä¸€æ­¥æˆæƒï¼ä¿®æ”¹ç®¡ç†å‘˜è§’è‰²ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409144206.png" alt="QQæˆªå›¾20190409144206.png"></p><p>ä¿®æ”¹åï¼Œé‡æ–°ç™»å½•ç³»ç»Ÿï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409144908.png" alt="QQæˆªå›¾20190409144908.png"></p><p>å› ä¸ºæˆ‘æ²¡æœ‰è®¾ç½®æ’åºï¼Œæ‰€ä»¥é»˜è®¤æ’åœ¨æœ€å‰é¢äº†ã€‚</p><h3 id="å¦‚ä½•éšè—è·¯ç”±"><a href="#å¦‚ä½•éšè—è·¯ç”±" class="headerlink" title="å¦‚ä½•éšè—è·¯ç”±"></a>å¦‚ä½•éšè—è·¯ç”±</h3><p>æœ‰çš„æ—¶å€™ï¼Œä¸€äº›è·¯ç”±å¹¶ä¸éœ€è¦æ¸²æŸ“æˆèœå•ï¼Œæ¯”å¦‚ä¸ªäººä¸­å¿ƒè¿™ç±»é¡µé¢ã€‚è€Œè¿™äº›é¡µé¢ä¸€èˆ¬éƒ½æ˜¯æ‰€æœ‰ç”¨æˆ·å…±æœ‰çš„ï¼Œæ‰€ä»¥åœ¨åå°ç³»ç»Ÿé‡Œæ„å»ºè·¯ç”±çš„æ—¶å€™å†™æ­»å³å¯ã€‚è¦éšè—è·¯ç”±åªéœ€è¦å°†è·¯ç”±metaçš„isShowå±æ€§è®¾ç½®ä¸ºfalseå³å¯ï¼š</p><p>å‚è€ƒåå°ä»£ç cc.mrbird.febs.common.utils.TreeUtilï¼š</p><p><img src="img/febsvue/20190409150427.png" alt="QQæˆªå›¾20190409150427.png"></p><h3 id="å¦‚ä½•åˆ†é…æƒé™"><a href="#å¦‚ä½•åˆ†é…æƒé™" class="headerlink" title="å¦‚ä½•åˆ†é…æƒé™"></a>å¦‚ä½•åˆ†é…æƒé™</h3><p>æƒé™æ˜¯å’Œè§’è‰²ç»‘å®šçš„ï¼Œæ‰€ä»¥è¦åˆ†é…æƒé™å®é™…å°±æ˜¯å¯¹è§’è‰²çš„å¢åˆ æ”¹ã€‚å‡å¦‚ç°åœ¨è¦é…ç½®ä¸€ä¸ªè§’è‰² â€”â€”â€” ç³»ç»Ÿç›‘æ§ç®¡ç†å‘˜ï¼Œè´Ÿè´£ç³»ç»Ÿç›‘æ§æ¨¡å—çš„æŸ¥çœ‹ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409152413.png" alt="QQæˆªå›¾20190409152413.png"></p><p>ç„¶åæ–°å¢ä¸€ä¸ªç”¨æˆ· â€”â€”â€” yuukiï¼Œè§’è‰²ä¸ºç³»ç»Ÿç›‘æ§ç®¡ç†å‘˜ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409152550.png" alt="QQæˆªå›¾20190409152550.png"></p><p>æ–°å»ºå¥½åï¼Œä½¿ç”¨yuukiçš„è´¦å·ç™»å½•ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409153002.png" alt="QQæˆªå›¾20190409153002.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œyuukiåªæœ‰ç³»ç»Ÿç›‘æ§æ¨¡å—çš„æƒé™ã€‚</p><h3 id="å‰ç«¯å¦‚ä½•æ·»åŠ ä¾èµ–"><a href="#å‰ç«¯å¦‚ä½•æ·»åŠ ä¾èµ–" class="headerlink" title="å‰ç«¯å¦‚ä½•æ·»åŠ ä¾èµ–"></a>å‰ç«¯å¦‚ä½•æ·»åŠ ä¾èµ–</h3><p>åœ¨<a href="https://www.npmjs.com/" target="_blank" rel="noopener">https://www.npmjs.com/</a>æœç´¢éœ€è¦å®‰è£…çš„ä¾èµ–ï¼Œæ¯”å¦‚jQueryï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409153227.png" alt="QQæˆªå›¾20190409153227.png"></p><p>æ¯”å¦‚æˆ‘éœ€è¦å®‰è£…jQuery 3.3.1ç‰ˆæœ¬ï¼Œåªéœ€è¦åœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤å³å¯ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409153710.png" alt="QQæˆªå›¾20190409153710.png"></p><p>å®‰è£…å¥½åï¼Œåœ¨package.jsonçš„ä¾èµ–åˆ—è¡¨é‡Œä¼šå¤šå‡ºä¸€ä¸ªjquery 3.3.1ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409153800.png" alt="QQæˆªå›¾20190409153800.png"></p><h3 id="å¦‚ä½•å¤„ç†æ’åº"><a href="#å¦‚ä½•å¤„ç†æ’åº" class="headerlink" title="å¦‚ä½•å¤„ç†æ’åº"></a>å¦‚ä½•å¤„ç†æ’åº</h3><p>å¯¹äºå‰ç«¯æ¥è¯´ï¼Œéœ€è¦ä¸Šé€ä¸¤ä¸ªå‚æ•°ï¼š</p><ol><li><p>sortFieldï¼šéœ€è¦æ’åºçš„å­—æ®µï¼›</p></li><li><p>sortOrderï¼šæ’åºè§„åˆ™ï¼Œascendæˆ–è€…descendã€‚</p></li></ol><p>å¯¹äºåç«¯æ¥è¯´ï¼Œæ’åºä¸»è¦åˆ†ä¸ºå››ç§æƒ…å†µï¼š</p><ol><li>ç»“æœéœ€è¦åˆ†é¡µçš„ï¼Œå¹¶ä¸”æ˜¯é€šè¿‡xmlå®šä¹‰çš„SQLæŸ¥è¯¢å‡ºæ¥çš„ç»“æœï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SortUtil.handlePageSort(request, page, <span class="string">"userId"</span>, FebsConstant.ORDER_ASC, <span class="keyword">false</span>);</span><br></pre></td></tr></table></figure><p><code>userId</code>å’Œ<code>FebsConstant.ORDER_ASC</code>æŒ‡å®šäº†é»˜è®¤çš„æ’åºè§„åˆ™ï¼Œå³é»˜è®¤æŒ‰ç…§<code>userId</code>å­—æ®µå‡åºæ’åºã€‚æœ€åä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ˜¯å¦éœ€è¦å¼€å¯é©¼å³°è½¬ä¸‹åˆ’çº¿ï¼Œè¿™ç§æƒ…å†µä¸‹ä¸éœ€è¦ï¼Œfalseå³å¯ã€‚</p><p>å…·ä½“å¯ä»¥å‚è€ƒcc.mrbird.febs.system.service.impl.UserServiceImpl#findUserDetailã€‚</p><p>å¦‚æœä¸éœ€è¦æŒ‡å®šé»˜è®¤æ’åºè§„åˆ™ï¼Œä½¿ç”¨handlePageSortçš„é‡è½½æ–¹æ³•å³å¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SortUtil.handlePageSort(request, page, <span class="keyword">false</span>);</span><br></pre></td></tr></table></figure><ol start="2"><li>ç»“æœéœ€è¦åˆ†é¡µçš„ï¼Œå¹¶ä¸”æ˜¯é€šè¿‡Mybatis Plusæ’ä»¶æŸ¥è¯¢å‡ºæ¥çš„ç»“æœï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SortUtil.handlePageSort(request, page, <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure><p>è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€åä¸€ä¸ªå‚æ•°å€¼å¿…é¡»ä¸ºtrueã€‚</p><p>å…·ä½“å¯ä»¥å‚è€ƒcc.mrbird.febs.system.service.impl.DictServiceImpl#findDictsã€‚</p><div class="note info"><p>1å’Œ2ä¸»è¦åŒºåˆ«å°±æ˜¯æ˜¯å¦éœ€è¦å¼€å¯é©¼å³°è½¬ä¸‹åˆ’çº¿ã€‚</p></div><ol start="3"><li>ç»“æœä¸éœ€è¦åˆ†é¡µï¼Œå¹¶ä¸”æ˜¯é€šè¿‡xmlå®šä¹‰çš„SQLæŸ¥è¯¢å‡ºæ¥çš„ç»“æœï¼š</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SortUtil.handleWrapperSort(request, queryWrapper, <span class="string">"orderNum"</span>, FebsConstant.ORDER_ASC, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>å…·ä½“å¯ä»¥å‚è€ƒï¼šcc.mrbird.febs.system.service.impl.DeptServiceImpl#findDepts</p><ol start="4"><li>ç»“æœä¸éœ€è¦åˆ†é¡µï¼Œå¹¶ä¸”æ˜¯é€šè¿‡Mybatis Plusæ’ä»¶æŸ¥è¯¢å‡ºæ¥çš„ç»“æœï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SortUtil.handleWrapperSort(request, queryWrapper, <span class="string">"orderNum"</span>, FebsConstant.ORDER_ASC, <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure><p>æ€»ä¹‹ï¼Œå¯¹äºå¤„ç†æ’åºçš„æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸€å®šæ˜¯cc.mrbird.febs.common.domain.QueryRequestã€‚ç¬¬äºŒä¸ªå‚æ•°å¦‚æœéœ€è¦åˆ†é¡µï¼Œåˆ™ä¼ é€’com.baomidou.mybatisplus.extension.plugins.pagination.Pageï¼Œä¸éœ€è¦åˆ†é¡µåˆ™ä¼ é€’com.baomidou.mybatisplus.core.conditions.query.QueryWrapperã€‚æœ€åä¸€ä¸ªå‚æ•°å¦‚æœæŸ¥è¯¢ç»“æœæ˜¯Mybatis PlusæŸ¥è¯¢å‡ºæ¥çš„ç»“æœï¼Œåˆ™éœ€è®¾ç½®ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalseã€‚</p><h3 id="åç«¯æ¥å£æµ‹è¯•"><a href="#åç«¯æ¥å£æµ‹è¯•" class="headerlink" title="åç«¯æ¥å£æµ‹è¯•"></a>åç«¯æ¥å£æµ‹è¯•</h3><p>ç”±äºåç«¯æ¥å£ä¸ºRESTfulæ¥å£ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨æµè§ˆå™¨æ¥æµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨PostManæˆ–è€…Chromeæ’ä»¶RestLetæ¥æµ‹è¯•åç«¯æ¥å£ã€‚æ–‡æ¡£ä»¥PostManä¸ºä¾‹ã€‚</p><p>å› ä¸ºåå°æ¥å£å¤§éƒ¨åˆ†éƒ½éœ€è¦ç”¨æˆ·è®¤è¯åæ‰èƒ½è®¿é—®ï¼Œæ‰€ä»¥åœ¨æµ‹è¯•ä¹‹å‰éœ€è¦é€šè¿‡ç™»å½•æ¥å£è·å–ä¸€ä¸ªå¯ç”¨çš„tokenã€‚</p><p><img src="img/febsvue/QQæˆªå›¾20190409161742.png" alt="QQæˆªå›¾20190409161742.png"></p><p>æˆåŠŸè·å–åˆ°äº†tokenã€‚</p><p>æµ‹è¯•è·å–mrbirdçš„å‰ç«¯è·¯ç”±ä¿¡æ¯ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409161947.png" alt="QQæˆªå›¾20190409161947.png"></p><p>åœ¨Headersè®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹ï¼Œkeyä¸ºAuthenticationï¼Œvalueä¸ºåˆšåˆšè·å–åˆ°çš„tokenï¼Œå‘é€è¯·æ±‚ä¾¿å¯ä»¥è·å–åˆ°mrbirdçš„è·¯ç”±ä¿¡æ¯ã€‚å…¶ä»–æ¥å£æµ‹è¯•ä»¥æ­¤ç±»æ¨ã€‚</p><p>å¦‚æœtokenå¡«é”™æˆ–è€…ä¸å¡«ï¼š</p><p><img src="img/febsvue/QQæˆªå›¾20190409162214.png" alt="QQæˆªå›¾20190409162214.png"></p><p>åç«¯å°†è¿”å›401ã€‚</p><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="å¯¼å…¥é¡¹ç›®ç¼–è¯‘å‡ºé”™ï¼Œä»£ç æ˜¯å¦ä¸å…¨ï¼Ÿ"><a href="#å¯¼å…¥é¡¹ç›®ç¼–è¯‘å‡ºé”™ï¼Œä»£ç æ˜¯å¦ä¸å…¨ï¼Ÿ" class="headerlink" title="å¯¼å…¥é¡¹ç›®ç¼–è¯‘å‡ºé”™ï¼Œä»£ç æ˜¯å¦ä¸å…¨ï¼Ÿ"></a>å¯¼å…¥é¡¹ç›®ç¼–è¯‘å‡ºé”™ï¼Œä»£ç æ˜¯å¦ä¸å…¨ï¼Ÿ</h3><p>ç¼–è¾‘å™¨å®‰è£…lombokæ’ä»¶å³å¯ã€‚</p><h3 id="å¯¼å…¥SQLä¸ºä½•å‡ºé”™ï¼Ÿ"><a href="#å¯¼å…¥SQLä¸ºä½•å‡ºé”™ï¼Ÿ" class="headerlink" title="å¯¼å…¥SQLä¸ºä½•å‡ºé”™ï¼Ÿ"></a>å¯¼å…¥SQLä¸ºä½•å‡ºé”™ï¼Ÿ</h3><p>MySQLæ•°æ®åº“è¯·ä½¿ç”¨5.7.xç‰ˆæœ¬ï¼Œä¸åŒç‰ˆæœ¬SQLè¯­æ³•æœ‰å·®å¼‚ã€‚å¦‚æœä½ SQLæŠ€æœ¯è¿‡ç¡¬å¯ä»¥é€šè¿‡é”™è¯¯ä¿¡æ¯å»ä¿®æ”¹å‡ºé”™çš„SQLï¼Œæ›´æ¨èçš„åšæ³•æ˜¯å®‰è£…æ¨èç‰ˆæœ¬çš„MySQLæ•°æ®åº“ã€‚</p><h3 id="ip2regionæ˜¯å•¥ç©æ„ï¼Œæ‰“å¼€æ€ä¹ˆä¹±ç ï¼Ÿ"><a href="#ip2regionæ˜¯å•¥ç©æ„ï¼Œæ‰“å¼€æ€ä¹ˆä¹±ç ï¼Ÿ" class="headerlink" title="ip2regionæ˜¯å•¥ç©æ„ï¼Œæ‰“å¼€æ€ä¹ˆä¹±ç ï¼Ÿ"></a>ip2regionæ˜¯å•¥ç©æ„ï¼Œæ‰“å¼€æ€ä¹ˆä¹±ç ï¼Ÿ</h3><p>é€šè¿‡ipè·å–åœ°å€çš„å¼€æºè½¯ä»¶æ•°æ®åº“æ–‡ä»¶ï¼Œä¸è¦ç›´æ¥æ‰“å¼€ã€‚ip2regionåœ°å€ï¼š<a href="https://github.com/lionsoul2014/ip2region" target="_blank" rel="noopener">https://github.com/lionsoul2014/ip2region</a>ã€‚</p><h2 id="é¡¹ç›®ç¼ºé™·"><a href="#é¡¹ç›®ç¼ºé™·" class="headerlink" title="é¡¹ç›®ç¼ºé™·"></a>é¡¹ç›®ç¼ºé™·</h2><ol><li><p>å‰ç«¯é¡µé¢ä¸æ”¯æŒç§»åŠ¨ç«¯ï¼ˆä¸èƒ½è‡ªé€‚åº”ï¼‰ï¼›</p></li><li><p>å‰ç«¯æ‰“åŒ…åvendor.jsè¾ƒå¤§ï¼Œé€šè¿‡nginxå‹ç¼©ååœ¨591kbå·¦å³ï¼Œåœ¨æˆ‘çš„æ¸£æ¸£æœåŠ¡å™¨ï¼ˆ1æ ¸1G1Mï¼‰ä¸‹ï¼Œè®¿é—®æ—¶é—´å¤§çº¦ä¸º7 - 8ç§’å·¦å³ï¼š</p></li></ol><p><img src="img/febsvue/QQæˆªå›¾20190409162930.png" alt="QQæˆªå›¾20190409162930.png"></p><p>å¦‚æœä½ çš„æœåŠ¡å™¨å¸¦å®½å¤Ÿå¤§ï¼Œæˆ–è€…æ˜¯éƒ¨ç½²åœ¨å…¬å¸å±€åŸŸç½‘å†…çš„è¯ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥å¿½ç•¥ã€‚å¦‚æœè¦åœ¨æ ¹æºä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ä¸ªäººè§‰å¾—å¯ä»¥ä»è¿™å‡ ä¸ªåœ°æ–¹å…¥æ‰‹ï¼š</p><ul><li><p>Ant Designé‡‡ç”¨SVGæ ¼å¼çš„å›¾æ ‡åï¼Œå¯¼è‡´é¡¹ç›®æ‰“åŒ…ä½“ç§¯è¿‡å¤§ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹issueçš„è®¨è®ºï¼š<a href="https://github.com/vueComponent/ant-design-vue/issues/325" target="_blank" rel="noopener">https://github.com/vueComponent/ant-design-vue/issues/325</a>å’Œ<a href="https://github.com/ant-design/ant-design/issues/12011" target="_blank" rel="noopener">https://github.com/ant-design/ant-design/issues/12011</a>ï¼›</p></li><li><p>å¯ä»¥å°†ä¾èµ–é€šè¿‡CDNæ¥åŠ è½½ï¼Œå‚è€ƒè¿æ¥ï¼š<a href="https://blog.csdn.net/qq_35844177/article/details/78599064" target="_blank" rel="noopener">https://blog.csdn.net/qq_35844177/article/details/78599064</a>ï¼›</p></li><li><p>webpackæ‰“åŒ…é…ç½®å¯èƒ½å­˜åœ¨å¯ä¼˜åŒ–çš„åœ°æ–¹ã€‚</p></li></ul><p>ç”±äºæˆ‘æ‰ç–å­¦æµ…ï¼Œå‰ç«¯æŠ€èƒ½è–„å¼±ï¼Œæ‰€ä»¥æ²¡èƒ½å¤Ÿå¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¬¢è¿æ¥è‡ªäº”æ¹–å››æµ·çš„èƒ½äººå¿—å£«pull requestæ¥æ”¹å–„è¿™ä¸ªé—®é¢˜ï¼Œæ„Ÿæ¿€ä¸å°½ã€‚</p><p><img src="img/febsvue/QQå›¾ç‰‡20190409164403.jpg" alt="QQå›¾ç‰‡20190409164403.jpg"></p><script>$(".post-body a").not(".thispage").addClass("ignore-href").attr("target","_blank")</script></div><div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center;color:#878787"><div>è¯·ä½œè€…å–ç“¶è‚¥å®…æ°´~</div><button id="rewardButton" style="margin-top:10px" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'><span style="height:46px;width:46px;line-height:46px;border-radius:50%;color:#fe5f55;font-weight:600;background:#ffd5be;border:none;box-shadow:0 4px 8px 0 rgba(255,213,190,.4)">ï¿¥</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/img/wechat_pay.png" alt="MrBird WeChat Pay"></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" src="/img/ali_pay.png" alt="MrBird Alipay"></div></div></div><style>#QR img{width:auto;margin:.8em 1em 0 1em}</style></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong> MrBird</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="http://mrbird.cc/FEBS-Vue-Document.html" title="FEBS-Vueæ–‡æ¡£">http://mrbird.cc/FEBS-Vue-Document.html</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div><footer class="post-footer"><div class="post-tags" style="margin-bottom:1.3rem"><a href="/tags/FEBS/" rel="tag"># FEBS</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/Spring-Boot-WebFlux-CRUD.html" rel="next" title="Spring Boot WebFluxå¢åˆ æ”¹æŸ¥æ ·ä¾‹"><i class="fa fa-chevron-left"></i> Spring Boot WebFluxå¢åˆ æ”¹æŸ¥æ ·ä¾‹</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/Guava-Collection.html" rel="prev" title="Guava é›†åˆæ“ä½œ">Guava é›†åˆæ“ä½œ <i class="fa fa-chevron-right"></i></a></div></div></footer></article><hr><div id="container"></div><div class="post-spread"><div id="comment-div"></div><style>.valine .vlist{margin-bottom:3rem}.valine .vwrap .vcontrol .col.col-60{text-align:left}.valine .vlist .vcard .vhead,.valine .vlist .vcard section .vfooter{text-align:left}.valine .vlist .vcard section{padding-bottom:.5rem!important}.vname{color:#42b983!important}.valine .vinfo .col{text-align:left;margin-left:-27rem}div#comment-div{margin-bottom:-8rem}.valine .vlist .vcard .vcontent .code,.valine .vlist .vcard .vcontent code,.valine .vlist .vcard .vcontent pre{background:#fbfbfb}.valine .vlist .vcard .vcontent a{color:#42b983}.valine .vlist .vcard .vimg{border-radius:3px}.valine .vbtn{border-radius:2px;padding:.3rem 1.25rem}.valine .vbtn:active,.valine .vbtn:hover{color:#42b983;border-color:#42b983;background-color:#fff}.valine .vwrap .vheader .vinput:focus{border-bottom-color:#42b983}.valine .vlist .vcard .vcontent.expand:before{background:-webkit-gradient(linear,left top,left bottom,from(hsla(0,0%,100%,0)),to(hsla(0,0%,100%,.2)));background:linear-gradient(180deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.2))}.valine .vlist .vcard .vcontent.expand:after{content:"ç‚¹å‡»å±•å¼€";font-size:.4rem;text-align:right;left:-1rem;background:hsla(0,0%,100%,.2)}.valine .vlist .vcard section .vfooter .vat{color:#b3b3b3}.valine .vlist .vcard section .vfooter .vat:hover{color:#42b983}.vcontent img{margin:0}.valine .info{display:none}</style><script type="text/javascript" src="/js/av.min.js"></script><script type="text/javascript" src="/js/Valine.min.js"></script><script>new Valine({el:"#comment-div",notify:!0,verify:!0,appId:"SMcDFP1bN1jgb9Lo8JmtICHm-gzGzoHsz",appKey:"dH4nrUrt3V5XiJiI6Qyejnbi",placeholder:"",path:window.location.pathname,avatar:"monsterid",guest_info:["nick","mail","link"]})</script></div></div><script>var $bqinline=$("img[alt='bq-inline']");$bqinline.css({width:"2.3rem",height:"2.3rem",display:"inline","vertical-align":"text-bottom"})</script></div><div class="comments" id="comments"></div></div><aside id="sidebar" class="sidebar" onselectstart="return!1"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Contents</li><li class="sidebar-nav-overview" data-target="site-overview">Site Preview</li></ul><section class="site-overview sidebar-panel"><div class="sidebar-sticky sticky"><div itemscope itemtype="http://schema.org/Person"><div class="author__avatar"><img src="/images/blogImage.jpg" class="author__avatar" alt="MrBird" itemprop="image"></div><div class="author__content"><h3 class="author__name" itemprop="name">MrBird's Blog</h3><p class="author__bio" itemprop="description">A simple blog, code repository, just keep blogging</p></div><div class="author__urls-wrapper"><button class="btn btn--inverse">Follow</button><ul class="author__urls social-icons"><li><a href="http://map.baidu.com/?newmap=1&s=s%26wd%3D%E7%A6%8F%E5%B7%9E%E5%B8%82%26c%3D300&from=alamap&tpl=mapcity" target="_blank" itemprop="url" class="ignore-href"><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i>&nbsp;&nbsp;FuZhou,CN</a></li><li><a href="https://love.mrbird.cc" target="_blank" itemprop="url" class="ignore-href"><i class="fa fa-fw fa-diamond" aria-hidden="true"></i>&nbsp;&nbsp;Love</a></li><li><a href="http://111.230.157.133/febs" target="_blank" itemprop="url" class="ignore-href"><i class="fa fa-fw fa-chain" aria-hidden="true"></i>&nbsp;&nbsp;Website</a></li><li><a href="/atom.xml" target="_blank" itemprop="url" class="ignore-href"><i class="fa fa-fw fa-rss" aria-hidden="true"></i>&nbsp;&nbsp;RSS</a></li><li><a href="https://gitee.com/github-16661027" target="_blank" itemprop="sameAs" class="ignore-href"><i class="fa fa-fw fa-codepen" aria-hidden="true"></i>&nbsp;&nbsp;Gitee</a></li><li><a href="https://github.com/wuyouzhuguli" target="_blank" itemprop="sameAs" class="ignore-href"><i class="fa fa-fw fa-github-alt" aria-hidden="true"></i>&nbsp;&nbsp;GitHub</a></li><li><a href="javascript:;" class="popup-trigger"><i class="fa fa-fw fa-search" aria-hidden="true"></i>&nbsp;&nbsp;Search</a></li></ul></div></div></div><script>var $urls=$(".author__urls").find("a");$urls.each(function(){var o=$(this);o.mouseenter(function(){o.css({color:"#414547"})}),o.mouseleave(function(){o.css({color:""})})})</script></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#é¡¹ç›®å¯¼å…¥"><span class="nav-number">1.</span> <span class="nav-text">é¡¹ç›®å¯¼å…¥</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JDK"><span class="nav-number">1.1.</span> <span class="nav-text">JDK</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å®‰è£…Node-js"><span class="nav-number">1.2.</span> <span class="nav-text">å®‰è£…Node.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å®‰è£…yarn"><span class="nav-number">1.3.</span> <span class="nav-text">å®‰è£…yarn</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å®‰è£…Redis"><span class="nav-number">1.4.</span> <span class="nav-text">å®‰è£…Redis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å®‰è£…MySQL"><span class="nav-number">1.5.</span> <span class="nav-text">å®‰è£…MySQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯¼å…¥SQL"><span class="nav-number">1.6.</span> <span class="nav-text">å¯¼å…¥SQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯¼å…¥åç«¯é¡¹ç›®"><span class="nav-number">1.7.</span> <span class="nav-text">å¯¼å…¥åç«¯é¡¹ç›®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯¼å…¥å‰ç«¯é¡¹ç›®"><span class="nav-number">1.8.</span> <span class="nav-text">å¯¼å…¥å‰ç«¯é¡¹ç›®</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é¡¹ç›®éƒ¨ç½²"><span class="nav-number">2.</span> <span class="nav-text">é¡¹ç›®éƒ¨ç½²</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vagrantåˆ›å»ºCentOS"><span class="nav-number">2.1.</span> <span class="nav-text">Vagrantåˆ›å»ºCentOS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Javaç¯å¢ƒé…ç½®"><span class="nav-number">2.2.</span> <span class="nav-text">Javaç¯å¢ƒé…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å®‰è£…Docker"><span class="nav-number">2.3.</span> <span class="nav-text">å®‰è£…Docker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dockerå®‰è£…MySQL"><span class="nav-number">2.4.</span> <span class="nav-text">Dockerå®‰è£…MySQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dockerå®‰è£…Redis"><span class="nav-number">2.5.</span> <span class="nav-text">Dockerå®‰è£…Redis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dockerå®‰è£…Nginx"><span class="nav-number">2.6.</span> <span class="nav-text">Dockerå®‰è£…Nginx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åç«¯éƒ¨ç½²"><span class="nav-number">2.7.</span> <span class="nav-text">åç«¯éƒ¨ç½²</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å‰ç«¯éƒ¨ç½²"><span class="nav-number">2.8.</span> <span class="nav-text">å‰ç«¯éƒ¨ç½²</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åç«¯é¡¹ç›®ä»‹ç»"><span class="nav-number">3.</span> <span class="nav-text">åç«¯é¡¹ç›®ä»‹ç»</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#é¡¹ç›®ç»“æ„"><span class="nav-number">3.1.</span> <span class="nav-text">é¡¹ç›®ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é¡¹ç›®é…ç½®"><span class="nav-number">3.2.</span> <span class="nav-text">é¡¹ç›®é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RESTfulé£æ ¼"><span class="nav-number">3.3.</span> <span class="nav-text">RESTfulé£æ ¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ•°æ®å±‚ä»‹ç»"><span class="nav-number">3.4.</span> <span class="nav-text">æ•°æ®å±‚ä»‹ç»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç™»å½•é€»è¾‘"><span class="nav-number">3.5.</span> <span class="nav-text">ç™»å½•é€»è¾‘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redisç¼“å­˜ä½¿ç”¨"><span class="nav-number">3.6.</span> <span class="nav-text">Redisç¼“å­˜ä½¿ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åŠ¨æ€è·¯ç”±æ„å»º"><span class="nav-number">3.7.</span> <span class="nav-text">åŠ¨æ€è·¯ç”±æ„å»º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æƒé™æ§åˆ¶"><span class="nav-number">3.8.</span> <span class="nav-text">æƒé™æ§åˆ¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¤šæ•°æ®æº"><span class="nav-number">3.9.</span> <span class="nav-text">å¤šæ•°æ®æº</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä»£ç ç”Ÿæˆ"><span class="nav-number">3.10.</span> <span class="nav-text">ä»£ç ç”Ÿæˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Excelå¯¼å…¥å¯¼å‡º"><span class="nav-number">3.11.</span> <span class="nav-text">Excelå¯¼å…¥å¯¼å‡º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç»Ÿä¸€å‚æ•°æ ¡éªŒ"><span class="nav-number">3.12.</span> <span class="nav-text">ç»Ÿä¸€å‚æ•°æ ¡éªŒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQLæ‰“å°"><span class="nav-number">3.13.</span> <span class="nav-text">SQLæ‰“å°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AOPè®°å½•æ“ä½œæ—¥å¿—"><span class="nav-number">3.14.</span> <span class="nav-text">AOPè®°å½•æ“ä½œæ—¥å¿—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¥å£é™æµ"><span class="nav-number">3.15.</span> <span class="nav-text">æ¥å£é™æµ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shiroæ•™ç¨‹"><span class="nav-number">3.16.</span> <span class="nav-text">Shiroæ•™ç¨‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shiroå¦‚ä½•æ•´åˆJWT"><span class="nav-number">3.17.</span> <span class="nav-text">Shiroå¦‚ä½•æ•´åˆJWT</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å‰ç«¯é¡¹ç›®ä»‹ç»"><span class="nav-number">4.</span> <span class="nav-text">å‰ç«¯é¡¹ç›®ä»‹ç»</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#é¡¹ç›®ç»“æ„-1"><span class="nav-number">4.1.</span> <span class="nav-text">é¡¹ç›®ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ•°æ®å­˜å‚¨"><span class="nav-number">4.2.</span> <span class="nav-text">æ•°æ®å­˜å‚¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·¯ç”±å¯¼èˆªå®ˆå«"><span class="nav-number">4.3.</span> <span class="nav-text">è·¯ç”±å¯¼èˆªå®ˆå«</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æƒé™æ§åˆ¶-1"><span class="nav-number">4.4.</span> <span class="nav-text">æƒé™æ§åˆ¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Axioså°è£…"><span class="nav-number">4.5.</span> <span class="nav-text">Axioså°è£…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·¯å¾„é…ç½®"><span class="nav-number">4.6.</span> <span class="nav-text">è·¯å¾„é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç¬¬ä¸‰æ–¹ç»„ä»¶ä»‹ç»"><span class="nav-number">4.7.</span> <span class="nav-text">ç¬¬ä¸‰æ–¹ç»„ä»¶ä»‹ç»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¼€å‘å»ºè®®"><span class="nav-number">4.8.</span> <span class="nav-text">å¼€å‘å»ºè®®</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¼€å‘ç¤ºä¾‹"><span class="nav-number">5.</span> <span class="nav-text">å¼€å‘ç¤ºä¾‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ–°å»ºä¸€ä¸ªé¡µé¢"><span class="nav-number">5.1.</span> <span class="nav-text">æ–°å»ºä¸€ä¸ªé¡µé¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¦‚ä½•æ–°å»ºä¸€ä¸ªå¤šçº§èœå•"><span class="nav-number">5.2.</span> <span class="nav-text">å¦‚ä½•æ–°å»ºä¸€ä¸ªå¤šçº§èœå•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¦‚ä½•éšè—è·¯ç”±"><span class="nav-number">5.3.</span> <span class="nav-text">å¦‚ä½•éšè—è·¯ç”±</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¦‚ä½•åˆ†é…æƒé™"><span class="nav-number">5.4.</span> <span class="nav-text">å¦‚ä½•åˆ†é…æƒé™</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å‰ç«¯å¦‚ä½•æ·»åŠ ä¾èµ–"><span class="nav-number">5.5.</span> <span class="nav-text">å‰ç«¯å¦‚ä½•æ·»åŠ ä¾èµ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¦‚ä½•å¤„ç†æ’åº"><span class="nav-number">5.6.</span> <span class="nav-text">å¦‚ä½•å¤„ç†æ’åº</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åç«¯æ¥å£æµ‹è¯•"><span class="nav-number">5.7.</span> <span class="nav-text">åç«¯æ¥å£æµ‹è¯•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¸¸è§é—®é¢˜"><span class="nav-number">6.</span> <span class="nav-text">å¸¸è§é—®é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯¼å…¥é¡¹ç›®ç¼–è¯‘å‡ºé”™ï¼Œä»£ç æ˜¯å¦ä¸å…¨ï¼Ÿ"><span class="nav-number">6.1.</span> <span class="nav-text">å¯¼å…¥é¡¹ç›®ç¼–è¯‘å‡ºé”™ï¼Œä»£ç æ˜¯å¦ä¸å…¨ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯¼å…¥SQLä¸ºä½•å‡ºé”™ï¼Ÿ"><span class="nav-number">6.2.</span> <span class="nav-text">å¯¼å…¥SQLä¸ºä½•å‡ºé”™ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ip2regionæ˜¯å•¥ç©æ„ï¼Œæ‰“å¼€æ€ä¹ˆä¹±ç ï¼Ÿ"><span class="nav-number">6.3.</span> <span class="nav-text">ip2regionæ˜¯å•¥ç©æ„ï¼Œæ‰“å¼€æ€ä¹ˆä¹±ç ï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é¡¹ç›®ç¼ºé™·"><span class="nav-number">7.</span> <span class="nav-text">é¡¹ç›®ç¼ºé™·</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer" onselectstart="return!1"><div class="footer-inner"><div class="copyright">&copy; 2016 - <span itemprop="copyrightYear">2019</span>&nbsp;&nbsp; <span class="author" itemprop="copyrightHolder">MrBird</span>&nbsp;&nbsp;|<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>&nbsp;&nbsp;UV&nbsp;<span class="busuanzi-value" id="busuanzi_value_site_uv" style="cursor:pointer" title="ç»Ÿè®¡å¼€å§‹æ—¶é—´ï¼š2019å¹´7æœˆ5æ—¥"></span> &nbsp;&nbsp;PV&nbsp;<span class="busuanzi-value" id="busuanzi_value_site_pv" style="cursor:pointer" title="ç»Ÿè®¡å¼€å§‹æ—¶é—´ï¼š2019å¹´7æœˆ5æ—¥"></span></div></div></footer><div class="back-to-top"><span style="font-family:'Source Sans Pro','Helvetica Neue',Arial,sans-serif;font-size:1.2em;font-weight:600">TOP</span></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":search_path.endsWith("json")&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var C=[];0!=g.length;){var $=g[g.length-1],m=$.position,x=$.word,w=m-20,y=m+80;w<0&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),C.push(r(p,w,y,g))}C.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&(C=C.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",C.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script></body><script>$(function(){$("a").not(".nav-link,.cloud-tie-join-count,.ignore-href,.jstree-anchor").addClass("animsition-link")});var burst1=new mojs.Burst({left:0,top:0,radius:{5:40},children:{shape:"circle",fill:["red","cyan","orange"],fillOpacity:.8,radiusX:3.5,radiusY:3.5}});document.addEventListener("click",function(a){null==a.target.href&&"footer"!=a.target.className&&"copyright"!=a.target.className&&"author__urls social-icons"!=a.target.className&&"author__avatar"!=a.target.className&&"sidebar sidebar-active"!=a.target.className&&burst1.tune({x:a.pageX,y:a.pageY}).generate().replay()})</script><script type="text/javascript" src="/js/message.js"></script></html><!-- rebuild by neat -->